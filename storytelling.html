<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Climate Date Storytelling</title>
    <link rel="stylesheet" href="./assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.css" rel="stylesheet">

    <link rel="stylesheet" href="./assets/css/leaflet.css" />
    <link rel="stylesheet" href="./assets/css/styles.css">

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body class="bg-light">
    <div class="container py-4">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
                <div class="row w-100 align-items-center">
                    <!-- Esquerda: Logo -->
                    <div class="col-2 d-flex align-items-center">
                        <a class="navbar-brand fw-bold text-primary" href="index.html" style="font-size:1.3rem;">
                            <i class="fas fa-globe-americas me-2"></i>
                            Climate Data Storytelling
                        </a>
                    </div>
                    <!-- Meio: Navega√ß√£o -->
                    <div class="col-8">
                        <button class="navbar-toggler mb-2" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                            aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                            <ul class="navbar-nav mx-auto">
                                <li class="nav-item">
                                    <a class="nav-link" aria-current="page" href="index.html">In√≠cio</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link active" aria-current="page"
                                        href="storytelling.html">Storytelling</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" href="dashboard.html">Dashboard</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- Direita: A√ß√µes -->
                    <div class="col-2 d-flex justify-content-end align-items-center">
                        <a href="./artigo.html" class="btn btn-outline-primary" title="Ler o artigo completo">
                            <i class="fas fa-book-open mr-1"></i> Artigo
                        </a>
                        <a href="https://github.com/lucasfrag/climate-data-storytelling" target="_blank" rel="noopener"
                            class="btn btn-outline-dark ml-2" title="Ver no GitHub">
                            <i class="fab fa-github mr-1"></i> GitHub
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </div>
    <!-- Hero Section - Storytelling -->
    <section class="hero-section d-flex align-items-center justify-content-center text-center vh-100"
        style="min-height: 100vh; width: 100%; padding: 0; background: linear-gradient(120deg, #388e3c 0%, #81c784 100%); color: #fff;">
        <div class="container h-100 d-flex flex-column justify-content-center">
            <div class="row justify-content-center align-items-center flex-grow-1">
                <div class="col-lg-10 col-md-12">
                    <h1 class="display-3 fw-bold mb-4 hero-reveal"
                        style="text-shadow: 2px 2px 8px rgba(0,0,0,0.15); opacity:0; transform:translateY(40px);">
                        <i class="fas fa-book-open me-2"></i>
                        Storytelling
                    </h1>
                    <p class="lead mb-5 hero-reveal" style="font-size: 1.5rem; opacity:0; transform:translateY(40px);">
                        Uma jornada interativa pelos dados do clima em Porto Alegre.<br>
                        Explore hist√≥rias reais, gr√°ficos e mapas para entender como as mudan√ßas clim√°ticas impactam a
                        cidade e a vida das pessoas.
                    </p>
                    <!--
                    <div class="hero-reveal" style="opacity:0; transform:translateY(40px);">
                        <a href="#porto-alegre" class="btn btn-lg btn-outline-light px-5 py-3 mb-2">
                            <i class="fas fa-play me-2"></i> Come√ßar a hist√≥ria
                        </a>
                        <a href="dashboard.html" class="btn btn-lg btn-outline-light px-5 py-3 mb-2">
                            <i class="fas fa-chart-bar me-2"></i> Ir para o Dashboard
                        </a>
                    </div>-->
                    <div class="d-flex flex-column align-items-center mt-5 hero-reveal"
                        style="opacity:0; transform:translateY(40px);">
                        <p class="mb-2" style="font-size: 1.15rem;">
                            <strong>Des√ßa a p√°gina para mergulhar nas hist√≥rias do clima em Porto Alegre.</strong>
                        </p>
                        <br><br>
                        <button id="explorarBtn"
                            class="btn btn-light rounded-circle shadow d-flex align-items-center justify-content-center animate-bounce"
                            style="width: 64px; height: 64px; font-size: 2rem; color: #388e3c;">
                            <i class="fas fa-arrow-down"></i>
                        </button>
                    </div>
                    <script>
                        document.getElementById('explorarBtn').addEventListener('click', function (e) {
                            e.preventDefault();
                            const target = document.querySelector('#porto-alegre');
                            if (target) {
                                target.scrollIntoView({ behavior: 'smooth' });
                            }
                        });

                        // Anima√ß√£o de revela√ß√£o lenta
                        window.addEventListener('DOMContentLoaded', function () {
                            const items = document.querySelectorAll('.hero-reveal');
                            items.forEach((el, idx) => {
                                setTimeout(() => {
                                    el.style.transition = 'opacity 0.7s cubic-bezier(.4,0,.2,1), transform 0.7s cubic-bezier(.4,0,.2,1)';
                                    el.style.opacity = 1;
                                    el.style.transform = 'translateY(0)';
                                }, 350 * idx);
                            });
                        });
                    </script>
                </div>
            </div>
        </div>
    </section>

    <div class="tooltip" id="tooltip"></div>



    <!--------------------------------------------------------------------------------------------------------------------------->

    <!-- Se√ß√£o Porto Alegre -->
    <div class="container-fluid reveal-section vh-100 d-flex align-items-center justify-content-center "
        id="porto-alegre">
        <div class="row">
            <div class="col-12">
                <!-- Modal de Imagem Tur√≠stica (melhorado visualmente) -->
                <div class="modal fade" id="modalTuristico" tabindex="-1" aria-labelledby="modalTuristicoLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg" style="max-width: 1200px;">
                        <div class="modal-content" style="border-radius: 18px; overflow: hidden; position: relative;">
                            <div class="modal-body p-0">
                                <div class="row g-0">
                                    <div class="col-md-6 d-flex align-items-stretch" style="background: #f4f8fb;">
                                        <img id="modalTuristicoImg" src="" alt=""
                                            class="img-fluid w-100 h-100 object-fit-cover"
                                            style="border-top-left-radius: 18px; border-bottom-left-radius: 18px; min-height: 320px; object-fit: cover;">
                                    </div>
                                    <div class="col-md-6 d-flex flex-column justify-content-center p-4"
                                        style="background: #fff;">
                                        <button type="button"
                                            class="btn btn-light btn-sm rounded-circle shadow-sm ms-2 d-flex align-items-center justify-content-center"
                                            data-bs-dismiss="modal" aria-label="Fechar"
                                            style="position: absolute; top: 16px; right: 16px; width: 36px; height: 36px; border: none; font-size: 1.3rem; color: #1976d2; transition: background 0.2s; z-index: 10;">
                                            <i class="fas fa-times"></i>
                                        </button>
                                        <div class="d-flex justify-content-between align-items-start mb-2">
                                            <h5 class="modal-title fw-bold" id="modalTuristicoLabel"
                                                style="font-size: 1.5rem;"></h5>
                                        </div>

                                        <hr class="my-2">
                                        <p id="modalTuristicoDesc" class="lead" style="color: #444;">
                                        </p>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">

                <div class="col-12 hv-100 d-flex flex-column justify-content-center align-items-center">

                    <h2 class="poa-reveal"
                        style="padding: 30px 0px 50px 0px; background-color: #f8f9fa; opacity:0; transform:translateY(40px);">
                    </h2>
                    <div class="row">
                        <div class="col-lg-4 col-md-12 mb-4 mb-lg-0">
                            <a href="javascript:void(0);" class="img-link poa-reveal" tabindex="0"
                                style="opacity:0; transform:translateY(40px);">
                                <img src="assets/images/06.jpg"
                                    class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger"
                                    alt="Est√°tua do La√ßador"
                                    style="width: 280px; height: 420px; object-fit: cover; cursor: pointer;"
                                    data-title="Est√°tua do La√ßador"
                                    data-desc="A Est√°tua do La√ßador √© um dos principais s√≠mbolos de Porto Alegre e do Rio Grande do Sul. Representa o tradicional ga√∫cho pilchado e √© um ponto de refer√™ncia cultural e hist√≥rica da cidade." />
                            </a>
                            <a href="javascript:void(0);" class="img-link poa-reveal" tabindex="0"
                                style="opacity:0; transform:translateY(40px);">
                                <img src="assets/images/05.jpg"
                                    class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger" alt="Orla do Gua√≠ba"
                                    style="width: 280px; height: 180px; object-fit: cover; cursor: pointer;"
                                    data-title="Orla do Gua√≠ba"
                                    data-desc="A Orla do Gua√≠ba √© um dos cart√µes-postais de Porto Alegre, famosa pelo p√¥r do sol e por ser um espa√ßo de lazer, esportes e conviv√™ncia √† beira do lago." />
                            </a>
                        </div>

                        <div class="col-lg-4 col-md-12 mb-4 mb-lg-0">
                            <a href="javascript:void(0);" class="img-link poa-reveal" tabindex="0"
                                style="opacity:0; transform:translateY(40px);">
                                <img src="assets/images/03.jpg"
                                    class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger" alt="Est√°dio Beira-Rio"
                                    style="width: 280px; height: 180px; object-fit: cover; cursor: pointer;"
                                    data-title="Est√°dio Beira-Rio"
                                    data-desc="O Est√°dio Beira-Rio √© a casa do Sport Club Internacional e foi um dos palcos da Copa do Mundo de 2014. √â um dos maiores est√°dios do Brasil e importante ponto esportivo da cidade." />
                            </a>
                            <a href="javascript:void(0);" class="img-link poa-reveal" tabindex="0"
                                style="opacity:0; transform:translateY(40px);"></a>
                            <img src="assets/images/01.jpg" class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger"
                                alt="Parque Farroupilha"
                                style="width: 280px; height: 420px; object-fit: cover; cursor: pointer;"
                                data-title="Parque Farroupilha"
                                data-desc="O Parque Farroupilha, conhecido como Reden√ß√£o, √© o parque mais tradicional de Porto Alegre. Local de lazer, feiras e eventos culturais, √© um espa√ßo verde no cora√ß√£o da cidade."
                                author="Jefferson Bernardes" />
                            </a>
                        </div>

                        <div class="col-lg-4 col-md-12 mb-4 mb-lg-0">
                            <a href="javascript:void(0);" class="img-link poa-reveal" tabindex="0"
                                style="opacity:0; transform:translateY(40px);">
                                <img src="assets/images/08.jpg"
                                    class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger"
                                    alt="Casa de Cultura Mario Quintana"
                                    style="width: 280px; height: 420px; object-fit: cover; cursor: pointer;"
                                    data-title="Casa de Cultura Mario Quintana"
                                    data-desc="A Casa de Cultura Mario Quintana √© um centro cultural instalado no antigo Hotel Majestic. Homenageia o poeta Mario Quintana e oferece programa√ß√£o art√≠stica diversificada." />
                            </a>
                            <a href="javascript:void(0);" class="img-link poa-reveal" tabindex="0"
                                style="opacity:0; transform:translateY(40px);">
                                <img src="assets/images/07.jpg"
                                    class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger"
                                    alt="Usina do Gas√¥metro"
                                    style="width: 280px; height: 180px; object-fit: cover; cursor: pointer;"
                                    data-title="Usina do Gas√¥metro"
                                    data-desc="A Usina do Gas√¥metro √© um dos √≠cones arquitet√¥nicos de Porto Alegre. Antiga usina de energia, hoje √© um centro cultural e ponto de encontro para apreciar o p√¥r do sol no Gua√≠ba." />
                            </a>
                        </div>
                    </div>
                </div>

            </div>


            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 " style="background-color: #f8f9fa; ">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top poa-reveal" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa; opacity:0; transform:translateY(40px);"
                        tabindex="0">
                        Porto Alegre: A Capital Ga√∫cha
                    </h1>

                    <div class="mb-4 d-flex flex-wrap align-items-center poa-reveal"
                        style="opacity:0; transform:translateY(40px);">
                        <span class="badge badge-primary mr-2 mb-2 px-3 py-2 d-flex align-items-center"
                            style="font-size:1rem;">
                            <i class="fas fa-city mr-2"></i> Porto Alegre
                        </span>
                        <span class="badge badge-secondary mr-2 mb-2 px-3 py-2 d-flex align-items-center"
                            style="font-size:1rem;">
                            <i class="fas fa-users mr-2"></i> Popula√ß√£o: 1,5 milh√£o
                        </span>
                        <span class="badge badge-success mr-2 mb-2 px-3 py-2 d-flex align-items-center"
                            style="font-size:1rem;">
                            <i class="fas fa-landmark mr-2"></i> Capital do RS
                        </span>
                        <span class="badge badge-info mb-2 px-3 py-2 d-flex align-items-center" style="font-size:1rem;">
                            <i class="fas fa-water mr-2"></i> √Äs margens do Gua√≠ba
                        </span>
                    </div>

                    <div class="col-12 justify-content-center align-items-center">
                        <p class="poa-reveal" style="opacity:0; transform:translateY(40px);">Para entender como o clima
                            afeta nossa vida, √© preciso primeiro conhecer o lugar onde tudo
                            acontece.</p>

                        <p class="poa-reveal" style="opacity:0; transform:translateY(40px);">Porto Alegre, capital do
                            Rio Grande do Sul, √© uma das principais cidades do sul do Brasil,
                            com cerca de 1,5 milh√£o de habitantes. Reconhecida por sua relev√¢ncia pol√≠tica, cultural e
                            hist√≥rica, a cidade combina tradi√ß√£o e inova√ß√£o √†s margens do Lago Gua√≠ba.</p>

                        <p class="poa-reveal" style="opacity:0; transform:translateY(40px);">Aqui, o moderno se mistura
                            ao antigo. Est√°dios que sediaram Copas do Mundo dividem espa√ßo com
                            parques centen√°rios e casas de cultura. Cada canto tem uma hist√≥ria.</p>

                        <p class="font-weight-bold poa-reveal" style="opacity:0; transform:translateY(40px);">üéØ Explore
                            os principais pontos de Porto Alegre pelas imagens ao lado.</p>
                        <div class="alert alert-info mt-4 poa-reveal" role="alert"
                            style="opacity:0; transform:translateY(40px);">
                            <strong>Dica:</strong> Clique em cada foto para ver curiosidades, hist√≥ria e detalhes sobre
                            o local.</span>
                        </div>

                        <p class="poa-reveal" style="opacity:0; transform:translateY(40px);">Porto Alegre √© um centro
                            cultural vibrante, com uma cena art√≠stica rica, festivais de m√∫sica,
                            teatro e literatura. A cidade √© famosa por sua culin√°ria diversificada, com destaque para o
                            churrasco ga√∫cho e os vinhos da regi√£o.</p>


                        <p class="poa-reveal" style="opacity:0; transform:translateY(40px);">Mas al√©m da beleza e da
                            cultura, Porto Alegre tamb√©m enfrenta uma amea√ßa silenciosa: <strong>o clima
                                est√° mudando ‚ö†Ô∏è</strong></p>
                        <p class="poa-reveal" style="opacity:0; transform:translateY(40px);">
                            E para entender isso, √© preciso olhar para quem observa o c√©u todos os dias...</p>

                        <div class="alert alert-warning d-flex align-items-center my-4 poa-reveal" role="alert"
                            style="font-size: 1.15rem; opacity:0; transform:translateY(40px);">
                            <i class="fas fa-thermometer-half fa-lg mr-3 text-warning"></i>
                            <div>
                                Vamos conhecer agora as <strong>esta√ß√µes meteorol√≥gicas</strong> ‚Äî as sentinelas
                                silenciosas que registram cada mudan√ßa no tempo.
                            </div>
                        </div>

                        <hr class="poa-reveal" style="opacity:0; transform:translateY(40px);">

                        <div class="end-content w-100 text-center mt-4 poa-reveal"
                            style="opacity:0; transform:translateY(40px);">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima
                                se√ß√£o.</p>
                            <button id="explorarEstacoes" class="btn btn-primary rounded-circle shadow"
                                style="width: 55px; height: 55px;" aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>

                            <script>
                                document.getElementById('explorarEstacoes').addEventListener('click', function (e) {
                                    e.preventDefault();
                                    const target = document.querySelector('#estacoes-meteorologicas');
                                    if (target) {
                                        target.scrollIntoView({ behavior: 'smooth' });
                                    }
                                });                                   
                            </script>
                        </div>

                    </div>
                </div>
            </div>


        </div>
    </div>
    <script>
        // Revela√ß√£o lenta da se√ß√£o Porto Alegre
        document.addEventListener("DOMContentLoaded", function () {
            function revealSequentiallyPoa(items, delay = 180) {
                items.forEach((item, idx) => {
                    setTimeout(() => {
                        item.style.transition = 'opacity 0.7s cubic-bezier(.4,0,.2,1), transform 0.7s cubic-bezier(.4,0,.2,1)';
                        item.style.opacity = 1;
                        item.style.transform = 'translateY(0)';
                    }, idx * delay);
                });
            }

            const section = document.getElementById('porto-alegre');
            const revealItems = section.querySelectorAll('.poa-reveal');
            let revealed = false;

            function handleReveal(entries, observer) {
                entries.forEach(entry => {
                    if (entry.isIntersecting && !revealed) {
                        revealSequentiallyPoa(Array.from(revealItems));
                        revealed = true;
                        observer.disconnect();
                    }
                });
            }

            const observer = new IntersectionObserver(handleReveal, { threshold: 0.2 });
            observer.observe(section);
        });
    </script>


    <!---------------------------------------------------------------------------------------------------->

    <!-- Se√ß√£o Esta√ß√µes Meteorol√≥gicas -->
    <div class="container-fluid reveal-section align-items-center justify-content-center " id="estacoes-meteorologicas">
        <div class="row">

            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 scroll-content" style="background-color: #f8f9fa;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light mb-3 text-h1 reveal-item sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        As Esta√ß√µes Meteorol√≥gicas
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p class="reveal-item">Antes que a chuva caia ou o calor aperte, algu√©m j√° sabe: as esta√ß√µes
                            meteorol√≥gicas.</p>

                        <p class="reveal-item">Espalhadas por todo o Brasil e operadas pelo <a
                                href="https://portal.inmet.gov.br/" target="_blank">INMET (Instituto Nacional de
                                Meteorologia)</a>, elas coletam dados sobre temperatura, umidade, vento e press√£o ‚Äî
                            todos os
                            dias, h√° d√©cadas.</p>

                        <p class="reveal-item">As esta√ß√µes meteorol√≥gicas do INMET est√£o distribu√≠das por todo o
                            territ√≥rio nacional, coletando dados em tempo real sobre temperatura, umidade, press√£o
                            atmosf√©rica, vento e precipita√ß√£o.</p>

                        <p class="reveal-item">A seguir, voc√™ poder√° ver quantas esta√ß√µes existem, como elas se
                            distribuem no mapa e como esse n√∫mero cresceu ao longo dos anos no Rio Grande do Sul.</p>

                        <p class="font-weight-bold reveal-item">üéØ Use o controle abaixo para navegar pelos anos e veja
                            no mapa como a rede
                            de monitoramento se expandiu. Quanto mais esta√ß√µes, melhores os dados ‚Äî e melhores as
                            decis√µes.</p>



                        <section aria-labelledby="estacoes-title" class="reveal-item">


                            <div class="alert alert-info mt-4" role="alert">
                                <strong>Dica:</strong> Clique no bot√£o <strong>"Ver evolu√ß√£o"</strong> ou
                                <strong>deslize o controle
                                    abaixo</strong> para ver as esta√ß√µes aparecendo no mapa.
                            </div>


                            <div id="yearSliderContainer" class="my-3">
                                <label for="yearSlider" id="yearSliderLabel"
                                    class="form-label d-flex justify-content-between align-items-center">
                                    <strong>Ano:</strong>
                                    <span id="yearLabel">2020</span>

                                    <button id="playBtn" type="button" aria-label="Mostrar evolu√ß√£o das esta√ß√µes"
                                        title="Mostrar evolu√ß√£o das esta√ß√µes" class="btn btn-outline-primary ms-3"
                                        aria-pressed="false" style="margin-left: 8px;">‚ñ∂Ô∏è Ver evolu√ß√£o</button>
                                </label>

                                <input style="width: 100%;" type="range" id="yearSlider" min="2000" max="2025"
                                    value="2000" aria-labelledby="yearSliderLabel" />

                            </div>



                            <p class="mb-2 text-muted">O gr√°fico abaixo mostra a evolu√ß√£o do n√∫mero de esta√ß√µes
                                meteorol√≥gicas ao longo dos anos no Rio Grande do Sul.
                            </p>

                            <canvas height="120" id="graficoEstacoes" role="img"
                                aria-label="Gr√°fico de barras mostrando o n√∫mero de esta√ß√µes fundadas por ano"></canvas>
                            <center>
                                <p class="mb-2 text-muted">Para visualizar as informa√ß√µes de um ano
                                    espec√≠fico, basta passar o mouse sobre as barras.</p>
                            </center>
                            <br>

                            <div class="alert alert-success d-flex align-items-center my-4 reveal-item" role="alert"
                                style="font-size: 1.15rem;">

                                <div>
                                    <strong><i class="fas fa-chart-line fa-lg me-3 text-success"></i> Agora que temos os
                                        dados,</strong> vamos ver o que eles mostram sobre as transforma√ß√µes do clima em
                                    Porto Alegre.<br>

                                </div>
                            </div>

                            <hr>
                            <div class="end-content w-100 text-center">
                                <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima
                                    se√ß√£o.</p>
                                <button id="explorarTransformacoes" class="btn btn-primary rounded-circle shadow"
                                    style="width: 55px; height: 55px;" aria-label="Ir para a pr√≥xima se√ß√£o">
                                    <span style="font-size: 1.7em; vertical-align: middle;"
                                        aria-hidden="true">&#8595;</span>
                                </button>
                                <br>


                                <script>
                                    document.getElementById('explorarTransformacoes').addEventListener('click', function (e) {
                                        e.preventDefault();
                                        const target = document.querySelector('#transformacoes');
                                        if (target) {
                                            target.scrollIntoView({ behavior: 'smooth' });
                                        }
                                    });                                   
                                </script>
                            </div>
                    </div>
                </div>
            </div>

            <!-- Gr√°ficos / Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center grafico-container"
                style="background-color: #f8f9fa;">
                <div id="map" class="vh-100" style="height: 600px;"></div>
            </div>
        </div>
    </div>


    <!------------------------------------------------------------------------------------------------------------------------------->
    <!-- Se√ß√£o Transforma√ß√µes Clim√°ticas -->
    <div class="container-fluid reveal-section vh-100 d-flex align-items-center justify-content-center "
        id="transformacoes">
        <div class="row">
            <!-- Gr√°fico -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center grafico-container reveal-item"
                style="background-color: #f8f9fa;">


                <section id="transformacoes-climaticas" class="container my-5">
                    <div class="mb-4 p-4 rounded shadow-sm bg-white border" id="charts">
                        <p class="text-muted mb-3">
                            <strong>üìä O que mostra?</strong><br>
                            Este gr√°fico apresenta a evolu√ß√£o das <strong>temperaturas m√©dias</strong> em Porto Alegre
                            ao longo dos √∫ltimos 25 anos. Ele permite identificar tend√™ncias de aquecimento, per√≠odos de
                            resfriamento e varia√ß√µes significativas ao longo do tempo.
                            <br><br>
                            <strong>üîç Como interagir?</strong><br>
                            Utilize o controle deslizante abaixo para definir um intervalo de anos personalizado. O
                            gr√°fico ser√° atualizado automaticamente, permitindo uma an√°lise mais precisa por per√≠odo.
                            <br><br>
                            Passe o mouse sobre os pontos da linha para visualizar os valores exatos e detectar os anos
                            com temperaturas extremas.
                        </p>

                        <div class="mb-4">
                            <label class="form-label">
                                üìÖ Selecione o intervalo de anos: <span id="range-inicio"
                                    class="text-primary fw-semibold"></span> ‚Äì <span id="range-fim"
                                    class="text-primary fw-semibold"></span>
                            </label>
                            <div id="range-anos"></div>
                        </div>

                        <center>
                            <small class="text-muted">üí° Clique nas legendas para filtrar a visualiza√ß√£o:</small>
                        </center>

                        <canvas id="grafico-transformacoes" height="160"></canvas>
                    </div>
                </section>






                <!-- noUiSlider -->
                <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.js"></script>

                <script>
                    fetch('./data/resumo_visualizacoes.json')
                        .then(res => res.json())
                        .then(dados => {
                            const anos = [];
                            const tempMedia = [];
                            const tempMax = [];
                            const tempMin = [];
                            const diasMax = {};
                            const diasMin = {};

                            function formatarData(dataISO) {
                                const data = new Date(dataISO);
                                return isNaN(data) ? "Data inv√°lida" : data.toLocaleDateString("pt-BR");
                            }

                            for (const ano in dados) {
                                const poaKey = "A801";
                                if (dados[ano][poaKey] && dados[ano][poaKey].temperatura) {
                                    anos.push(ano);
                                    tempMedia.push(dados[ano][poaKey].temperatura.media);
                                    tempMax.push(dados[ano][poaKey].temperatura.max);
                                    tempMin.push(dados[ano][poaKey].temperatura.min);

                                    if (dados[ano][poaKey].extremos) {
                                        diasMax[ano] = formatarData(dados[ano][poaKey].extremos.dia_temp_max);
                                        diasMin[ano] = formatarData(dados[ano][poaKey].extremos.dia_temp_min);
                                    }
                                }
                            }

                            const ctx = document.getElementById("grafico-transformacoes").getContext("2d");

                            const chart = new Chart(ctx, {
                                type: "line",
                                data: {
                                    labels: anos,
                                    datasets: [
                                        {
                                            label: "Temperatura M√°xima (¬∞C)",
                                            data: tempMax,
                                            borderColor: "#e74c3c",
                                            backgroundColor: "rgba(231,76,60,0.1)",
                                            tension: 0.4,
                                            fill: false,
                                            pointRadius: 3
                                        },

                                        {
                                            label: "Temperatura M√©dia (¬∞C)",
                                            data: tempMedia,
                                            borderColor: "#2ecc71",
                                            backgroundColor: "rgba(46,204,113,0.1)",
                                            tension: 0.4,
                                            fill: false,
                                            pointRadius: 3
                                        },

                                        {
                                            label: "Temperatura M√≠nima (¬∞C)",
                                            data: tempMin,
                                            borderColor: "#007bff",
                                            backgroundColor: "rgba(0,123,255,0.1)",
                                            tension: 0.4,
                                            fill: false,
                                            pointRadius: 3
                                        }
                                    ]
                                },
                                options: {
                                    responsive: true,
                                    interaction: {
                                        mode: "nearest",
                                        intersect: false
                                    },
                                    plugins: {
                                        tooltip: {
                                            callbacks: {
                                                label: ctx => {
                                                    const tipo = ctx.dataset.label;
                                                    const valor = ctx.formattedValue;
                                                    const ano = ctx.label;
                                                    const linhas = [`${tipo}: ${valor} ¬∞C`];

                                                    if (tipo.includes("M√°xima") && diasMax[ano]) {
                                                        linhas.push(`Registrado em:\n${diasMax[ano]}`);
                                                    }

                                                    if (tipo.includes("M√≠nima") && diasMin[ano]) {
                                                        linhas.push(`Registrado em:\n${diasMin[ano]}`);
                                                    }

                                                    return linhas;
                                                }
                                            }
                                        },
                                        legend: {
                                            display: true,
                                            position: "top",
                                            labels: {
                                                usePointStyle: true
                                            }
                                        }
                                    },
                                    scales: {
                                        y: {
                                            title: { display: true, text: "Temperatura (¬∞C)" },
                                            beginAtZero: false
                                        },
                                        x: {
                                            title: { display: true, text: "Ano" }
                                        }
                                    }
                                }
                            });

                            // === Cria√ß√£o do Range Slider ===
                            const slider = document.getElementById("range-anos");
                            noUiSlider.create(slider, {
                                start: [2000, 2025],
                                connect: true,
                                step: 1,
                                tooltips: false,
                                range: {
                                    min: 2000,
                                    max: 2025
                                },
                                format: {
                                    to: value => parseInt(value),
                                    from: value => parseInt(value)
                                }
                            });

                            const spanInicio = document.getElementById("range-inicio");
                            const spanFim = document.getElementById("range-fim");

                            function atualizarGrafico([inicio, fim]) {
                                const iInicio = anos.indexOf(inicio.toString());
                                const iFim = anos.indexOf(fim.toString()) + 1;

                                chart.data.labels = anos.slice(iInicio, iFim);
                                chart.data.datasets[0].data = tempMax.slice(iInicio, iFim);
                                chart.data.datasets[1].data = tempMedia.slice(iInicio, iFim);
                                chart.data.datasets[2].data = tempMin.slice(iInicio, iFim);
                                chart.update();
                            }

                            slider.noUiSlider.on("update", valores => {
                                const [inicio, fim] = valores.map(v => parseInt(v));
                                // Impede sele√ß√£o menor que 2 anos
                                if (fim - inicio < 1) return;

                                spanInicio.textContent = `${inicio}`;
                                spanFim.textContent = `${fim}`;
                                atualizarGrafico([inicio, fim]);
                            });
                        });
                </script>


            </div>
            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 scroll-content" style="background-color: #f8f9fa;">
                <div class="col-12 d-flex flex-column reveal-item">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        Transforma√ß√µes Clim√°ticas na Cidade
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">


                        <p>Ao longo de duas d√©cadas, os dados revelam uma verdade preocupante: Porto Alegre est√° ficando
                            mais quente.</p>

                        <p>As temperaturas m√©dias anuais mostram uma tend√™ncia de alta. E os extremos ‚Äî dias de calor
                            escaldante ou frio intenso ‚Äî est√£o se tornando mais comuns.</p>

                        <p>O gr√°fico ao lado mostra essa trajet√≥ria: do ano mais frio ao mais quente, das m√≠nimas √†s
                            m√°ximas, voc√™ pode explorar cada ponto.</p>


                        <p>
                            <strong>üî• Temperatura M√°xima (¬∞C):</strong> o dia mais quente
                            registrado em cada ano.
                        </p>
                        <p>
                            <strong>üå°Ô∏è Temperatura M√©dia (¬∞C):</strong> a m√©dia das temperaturas
                            mensais ao longo dos anos.
                        </p>
                        <p>
                            <strong>‚ùÑÔ∏è Temperatura M√≠nima (¬∞C):</strong> o dia mais frio registrado
                            em cada ano.
                        </p>




                        <div class="alert alert-info mt-4" role="alert">
                            <strong>Dica:</strong> Use o controle deslizante para escolher um intervalo de anos e
                            observe como o clima est√° mudando diante dos seus olhos.
                        </div>

                        <br>


                        <p>Mas o que isso significa para a cidade? Para as pessoas? Para o futuro?</p>


                        <div class="alert alert-danger d-flex align-items-center my-4" role="alert"
                            style="font-size: 1.15rem;">
                            <i class="fas fa-exclamation-circle fa-lg mr-3 text-danger"></i>
                            <div>
                                <strong>Em 2024, essa mudan√ßa deixou de ser apenas n√∫meros.</strong><br>
                                Vamos ver o que aconteceu quando a cidade enfrentou sua maior enchente em mais de 80
                                anos.
                            </div>
                        </div>



                        <hr>
                        <div class="end-content w-100 text-center">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima
                                se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 55px; height: 55px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o" id="explorarEnchentes">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>

                        <script>
                            document.getElementById('explorarEnchentes').addEventListener('click', function (e) {
                                e.preventDefault();
                                const target = document.querySelector('#enchentes-2024');
                                if (target) {
                                    target.scrollIntoView({ behavior: 'smooth' });
                                }
                            });                                   
                        </script>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!------------------------------------------------------------------------------------------------------------------------------->

    <!-- Se√ß√£o as enchentes de 2024 -->

    <div class="container-fluid reveal-section vh-100 d-flex align-items-center justify-content-center "
        id="enchentes-2024">
        <div class="row">
            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 scroll-content reveal-item" style="background-color: #f8f9fa;">


                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        As Enchentes de 2024
                    </h1>

                    <p>Em 2024, a realidade bateu √† porta ‚Äî ou melhor, invadiu as ruas.</p>

                    <p>A cidade enfrentou sua maior enchente desde 1941. O n√≠vel do Gua√≠ba subiu a 5,3 metros. Casas
                        foram alagadas, sistemas entraram em colapso e vidas foram perdidas.</p>


                    <p>O evento afetou milh√µes de pessoas, causou destrui√ß√£o em bairros inteiros e colapsou sistemas de
                        transporte, energia e abastecimento.</p>

                    <p>Foi decretado estado de calamidade p√∫blica, e equipes de resgate atuaram em toda a cidade. A
                        trag√©dia acendeu um alerta sobre os efeitos das mudan√ßas clim√°ticas no sul do Brasil.</p>

                    <div class="alert alert-info mt-4" role="alert">
                        <strong>Dica:</strong> Clique nas imagens para mais detalhes sobreos locais afetados pelas
                        enchentes de 2024.
                    </div>

                    <!-- Tabela com √≠cones -->
                    <div class="table-responsive mt-3 mb-4">
                        <table class="table table-bordered table-striped">
                            <thead class="thead-light">
                                <tr>
                                    <th>Fator</th>
                                    <th>Dados principais</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><i class="fas fa-cloud-showers-heavy me-2 text-primary"></i> Chuvas</td>
                                    <td>
                                        300‚Äì700‚ÄØmm em poucos dias<br>
                                        <small class="text-muted">
                                            Fonte:
                                            <a href="https://www.inmet.gov.br/portal/index.php?r=home/page&page=boletins"
                                                target="_blank" rel="noopener noreferrer">INMET</a> e
                                            <a href="https://tempo.cptec.inpe.br/" target="_blank"
                                                rel="noopener noreferrer">CPTEC/INPE</a>
                                        </small>
                                    </td>
                                </tr>
                                <tr>
                                    <td><i class="fas fa-water me-2 text-info"></i> N√≠vel do Gua√≠ba</td>
                                    <td>
                                        5,3‚ÄØm ‚Äî maior em 83 anos<br>
                                        <small class="text-muted">
                                            Fonte:
                                            <a href="https://agenciabrasil.ebc.com.br/geral/noticia/2024-05/cheia-do-guaiba-em-porto-alegre-supera-recorde-de-1941"
                                                target="_blank" rel="noopener noreferrer">Ag√™ncia Brasil</a>
                                        </small>
                                    </td>
                                </tr>
                                <tr>
                                    <td><i class="fas fa-users me-2 text-danger"></i> Pessoas afetadas</td>
                                    <td>
                                        2,4 milh√µes no RS<br>
                                        <small class="text-muted">
                                            Fonte:
                                            <a href="https://defesacivil.rs.gov.br/inicial" target="_blank"
                                                rel="noopener noreferrer">Defesa Civil RS</a>
                                        </small>
                                    </td>
                                </tr>
                                <tr>
                                    <td><i class="fas fa-chart-bar me-2 text-dark"></i> Mortes</td>
                                    <td>
                                        183 confirmadas<br>
                                        <small class="text-muted">
                                            Fonte:
                                            <a href="https://www.cnnbrasil.com.br/nacional/numero-de-mortes-no-rs-sobe-para-183-diz-defesa-civil/"
                                                target="_blank" rel="noopener noreferrer">CNN Brasil</a>
                                        </small>
                                    </td>
                                </tr>
                                <tr>
                                    <td><i class="fas fa-tractor me-2 text-warning"></i> Danos</td>
                                    <td>
                                        Moradia, agricultura, infraestrutura<br>
                                        <small class="text-muted">
                                            Fonte:
                                            <a href="https://g1.globo.com/rs/rio-grande-do-sul/noticia/2024/05/14/rs-ja-tem-mais-de-2-milhoes-de-pessoas-afetadas-e-danos-bilionarios.ghtml"
                                                target="_blank" rel="noopener noreferrer">G1</a>
                                        </small>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>



                    <canvas id="graficoEnchentesHistoricas" style="height: 180px;"></canvas>
                    <small class="text-muted text-center">üí° Passe o mouse sobre as barras para ver mais
                        detalhes.</small>
                    <small class="text-center">Fonte: <a
                            href="https://www.gov.br/ana/pt-br/assuntos/noticias-e-eventos/noticias/ana-publica-dados-em-tempo-real-de-monitoramento-do-nivel-do-lago-guaiba-em-porto-alegre-rs"
                            target="_blank">Ag√™ncia Nacional de √Åguas e Saneamento B√°sico (ANA).</a></small>
                    <script>
                        const niveisNormais = [
                            2.98, 3.12, 2.85, 3.10, 3.05, 2.90, 3.00, 2.95, 3.08, 3.01, 3.02,
                            3.12, 3.14, 2.96, 3.00, 3.11, 3.05, 3.03, 3.07, 3.09
                        ]; // valores fict√≠cios de exemplo

                        const mediaNormal = niveisNormais.reduce((a, b) => a + b, 0) / niveisNormais.length;

                        const dadosCheia = [
                            { rotulo: "M√©dia Hist√≥rica (anos normais)", nivel: mediaNormal, cor: "rgba(153, 102, 255, 0.7)" },
                            { rotulo: "Enchente de 1941", nivel: 4.76, cor: "rgba(54, 162, 235, 0.7)" },

                            { rotulo: "Enchente de 2024", nivel: 5.33, cor: "rgba(255, 99, 132, 0.85)" }
                        ];

                        new Chart(document.getElementById('graficoEnchentesHistoricas'), {
                            type: 'bar',
                            data: {
                                labels: dadosCheia.map(d => d.rotulo),
                                datasets: [{
                                    label: 'N√≠vel M√°ximo do Gua√≠ba (m)',
                                    data: dadosCheia.map(d => d.nivel),
                                    backgroundColor: dadosCheia.map(d => d.cor),
                                    borderRadius: 6
                                }]
                            },
                            options: {
                                indexAxis: 'y',
                                responsive: true,
                                plugins: {
                                    title: {
                                        display: true,
                                        text: 'Comparativo das Grandes Enchentes e M√©dia Hist√≥rica'
                                    },
                                    tooltip: {
                                        callbacks: {
                                            label: ctx => `${ctx.dataset.label}: ${ctx.raw.toFixed(2)} metros`
                                        }
                                    },
                                    legend: {
                                        display: false
                                    }
                                },
                                scales: {
                                    x: {
                                        beginAtZero: true,
                                        title: { display: true, text: 'N√≠vel M√°ximo (m)' }
                                    }
                                }
                            }
                        });
                    </script>


                    <div class="alert alert-warning d-flex align-items-center my-4" role="alert"
                        style="font-size: 1.15rem;">
                        <i class="fas fa-exclamation-triangle fa-lg mr-3 text-warning"></i>
                        <div>
                            <strong>Mas afinal, o que causou esse evento extremo?</strong><br>
                            Um dos vil√µes tem nome conhecido: <span class="font-weight-bold text-dark">El Ni√±o</span>.
                        </div>
                    </div>
                    <hr>
                    <div class="end-content w-100 text-center mt-4">
                        <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima
                            se√ß√£o.</p>
                        <button class="btn btn-primary rounded-circle shadow" style="width: 55px; height: 55px;"
                            aria-label="Ir para a pr√≥xima se√ß√£o" id="explorarElNino">
                            <span style="font-size: 1.7em; vertical-align: middle;" aria-hidden="true">&#8595;</span>
                        </button>
                    </div>

                    <script>
                        document.getElementById('explorarElNino').addEventListener('click', function (e) {
                            e.preventDefault();
                            const target = document.querySelector('#el-nino');
                            if (target) {
                                target.scrollIntoView({ behavior: 'smooth' });
                            }
                        });                                   
                    </script>
                    <br><br>
                </div>





            </div>
            <!-- Gr√°ficos / Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">


                <div class="col-12 hv-100 d-flex flex-column justify-content-center align-items-center reveal-item">

                    <h2 style="padding: 30px 0px 50px 0px; background-color: #f8f9fa;"></h2>
                    <div class="row">
                        <div class="col-lg-4 col-md-12 mb-4 mb-lg-0">
                            <a href="javascript:void(0);" class="img-link" tabindex="0">
                                <img src="assets/images/10.jpg"
                                    class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger"
                                    alt="Mercado P√∫blico de Porto Alegre"
                                    style="width: 280px; height: 420px; object-fit: cover; cursor: pointer;"
                                    data-title="Mercado P√∫blico de Porto Alegre"
                                    data-desc="O Mercado P√∫blico de Porto Alegre √© um dos principais pontos tur√≠sticos da cidade, conhecido por sua arquitetura hist√≥rica e pela variedade de produtos locais. Durante as enchentes de 2024, o mercado enfrentou desafios significativos devido ao ac√∫mulo de √°gua nas ruas adjacentes." />
                            </a>
                            <a href="javascript:void(0);" class="img-link" tabindex="0">
                                <img src="assets/images/11.jpg"
                                    class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger"
                                    alt="Usina do Gas√¥metro"
                                    style="width: 280px; height: 180px; object-fit: cover; cursor: pointer;"
                                    data-title="Usina do Gas√¥metro"
                                    data-desc="A Usina do Gas√¥metro  √© um dos √≠cones arquitet√¥nicos de Porto Alegre. Antiga usina de energia, hoje √© um centro cultural e ponto de encontro para apreciar o p√¥r do sol no Gua√≠ba. Durante as enchentes de 2024, a √°rea ao redor da usina foi severamente afetada, com ruas alagadas e dificuldades de acesso." />
                            </a>
                        </div>

                        <div class="col-lg-4 col-md-12 mb-4 mb-lg-0">
                            <a href="javascript:void(0);" class="img-link" tabindex="0">
                                <img src="assets/images/14.jpg"
                                    class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger"
                                    alt="Av. Loureiro da Silva"
                                    style="width: 280px; height: 180px; object-fit: cover; cursor: pointer;"
                                    data-title="Av. Loureiro da Silva"
                                    data-desc="A Av. Loureiro da Silva √© uma das principais vias de Porto Alegre, ligando a regi√£o central √† zona sul da cidade. Durante as enchentes de 2024, a avenida foi severamente afetada, com alagamentos e dificuldades de tr√°fego." />
                            </a>
                            <a href="javascript:void(0);" class="img-link" tabindex="0">
                                <img src="assets/images/16.jpg"
                                    class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger"
                                    alt="Popula√ß√£o Atingida pelas Enchentes"
                                    style="width: 280px; height: 420px; object-fit: cover; cursor: pointer;"
                                    data-title="Popula√ß√£o Atingida pelas Enchentes"
                                    data-desc="As enchentes de 2024 em Porto Alegre afetaram gravemente a popula√ß√£o, com muitas fam√≠lias deslocadas e danos significativos √† infraestrutura. A resposta da comunidade e das autoridades foi r√°pida, com esfor√ßos de resgate e apoio √†s v√≠timas." />
                            </a>
                        </div>

                        <div class="col-lg-4 col-md-12 mb-4 mb-lg-0">
                            <a href="javascript:void(0);" class="img-link" tabindex="0">
                                <img src="assets/images/13.jpg"
                                    class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger"
                                    alt="Opera√ß√£o de Resgate da Equipe de Bombeiros"
                                    style="width: 280px; height: 420px; object-fit: cover; cursor: pointer;"
                                    data-title="Opera√ß√£o de Resgate da Equipe de Bombeiros"
                                    data-desc="A Opera√ß√£o de Resgate da Equipe de Bombeiros foi um esfor√ßo conjunto para salvar v√≠timas durante as enchentes de 2024 em Porto Alegre. A equipe enfrentou condi√ß√µes adversas para garantir a seguran√ßa da popula√ß√£o." />
                            </a>
                            <a href="javascript:void(0);" class="img-link" tabindex="0">
                                <img src="assets/images/17.jpg"
                                    class="w-100 shadow-1-strong rounded mb-4 img-modal-trigger" alt="Ponte dos A√ßores"
                                    style="width: 280px; height: 180px; object-fit: cover; cursor: pointer;"
                                    data-title="Barcos nas Enchentes"
                                    data-desc="Durante as enchentes de 2024, barcos foram utilizados para resgatar pessoas ilhadas e transportar suprimentos. A imagem captura a cena de um barco navegando pelas ruas alagadas de Porto Alegre." />
                            </a>
                        </div>
                    </div>
                </div>


                <!-- Modal de Imagem Tur√≠stica (melhorado visualmente) -->
                <div class="modal fade" id="modalTuristico" tabindex="-1" aria-labelledby="modalTuristicoLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content" style="border-radius: 18px; overflow: hidden; position: relative;">
                            <div class="modal-body p-0">
                                <div class="row g-0">
                                    <div class="col-md-6 d-flex align-items-stretch" style="background: #f4f8fb;">
                                        <img id="modalTuristicoImg" src="" alt=""
                                            class="img-fluid w-100 h-100 object-fit-cover"
                                            style="border-top-left-radius: 18px; border-bottom-left-radius: 18px; min-height: 320px; object-fit: cover;">
                                    </div>
                                    <div class="col-md-6 d-flex flex-column justify-content-center p-4"
                                        style="background: #fff;">
                                        <button type="button"
                                            class="btn btn-light btn-sm rounded-circle shadow-sm ms-2 d-flex align-items-center justify-content-center"
                                            data-bs-dismiss="modal" aria-label="Fechar"
                                            style="position: absolute; top: 16px; right: 16px; width: 36px; height: 36px; border: none; font-size: 1.3rem; color: #1976d2; transition: background 0.2s; z-index: 10;">
                                            <i class="fas fa-times"></i>
                                        </button>
                                        <div class="d-flex justify-content-between align-items-start mb-2">
                                            <h5 class="modal-title fw-bold" id="modalTuristicoLabel"
                                                style="font-size: 1.5rem;"></h5>
                                        </div>

                                        <hr class="my-2">
                                        <p id="modalTuristicoDesc" class="lead" style="color: #444;">
                                        </p>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>






            </div>
        </div>
    </div>


    <!---------------------------------------------------------------------------------------------------->
    <!-- Se√ß√£o El Ni√±o -->
    <div class="container-fluid reveal-section vh-100 d-flex align-items-center justify-content-center " id="el-nino">
        <div class="row">
            <!-- Gr√°ficos / Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">

                <section class="container my-5 reveal-item">
                    <div class="mb-4 p-4 rounded shadow-sm bg-white border" id="charts">
                        <h4 class="fw-bold mb-3">üåßÔ∏è Chuva Acumulada ao Longo do Ano</h4>
                        <hr>
                        <p class="text-muted mb-3">
                            <strong>üìä O que mostra?</strong><br>
                            Este gr√°fico apresenta a <strong>precipita√ß√£o acumulada m√™s a m√™s</strong> em Porto Alegre,
                            permitindo observar a distribui√ß√£o das chuvas ao longo do ano. A curva revela padr√µes
                            sazonais e ajuda a identificar per√≠odos mais secos ou mais chuvosos.
                            <br><br>
                            <strong>üìÖ Como comparar?</strong><br>
                            Voc√™ pode selecionar um ano espec√≠fico para destacar sua curva de precipita√ß√£o e compar√°-lo
                            com os demais. √â poss√≠vel remover a sele√ß√£o clicando em <strong>‚ÄúLimpar sele√ß√£o‚Äù</strong>.
                        </p>

                        <div class="text-center my-3">
                            <label for="ano-comparacao" class="form-label mb-2">üìå Escolha um ano para destacar:</label>

                            <div class="d-flex justify-content-center align-items-center flex-nowrap mb-3"
                                style="gap: 0.4rem;">
                                <div style="width: 120px;">
                                    <select id="ano-comparacao" class="form-control form-select py-2"
                                        style="max-width: 100px; height: 38px;"></select>
                                </div>
                                <button id="btn-limpar" class="btn btn-outline-secondary" style="height: 38px;">
                                    Limpar sele√ß√£o
                                </button>
                            </div>

                            <small class="text-muted d-block">üí° Clique nos itens da legenda para ativar ou ocultar
                                curvas espec√≠ficas.</small>
                        </div>

                        <canvas id="grafico-el-nino" height="150"></canvas>
                    </div>
                </section>

                <script>
                    fetch("./data/resumo_visualizacoes.json")
                        .then((res) => res.json())
                        .then((dados) => {
                            const acumulados2024 = new Array(12).fill(0);
                            const acumuladosAnos = {};
                            const mesesLabels = ["Jan", "Fev", "Mar", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out", "Nov", "Dez"];
                            const anosValidos = [];
                            const anosAdicionados = new Set(["2024"]);

                            for (const [ano, estacoes] of Object.entries(dados)) {
                                const chave = "A801";
                                if (!estacoes[chave] || !estacoes[chave].precipitacao_mensal) continue;

                                const prec = estacoes[chave].precipitacao_mensal;
                                const acumulado = [];
                                let soma = 0;

                                for (let i = 1; i <= 12; i++) {
                                    const mm = prec[String(i).padStart(2, "0")] || 0;
                                    soma += mm;
                                    acumulado.push(soma);
                                }

                                if (ano === "2024") {
                                    for (let i = 0; i < 12; i++) acumulados2024[i] = acumulado[i];
                                } else if (+ano) {
                                    acumuladosAnos[ano] = acumulado;
                                    anosValidos.push(ano);
                                }
                            }

                            anosValidos.sort((a, b) => a - b);

                            const select = document.getElementById("ano-comparacao");
                            const btnLimpar = document.getElementById("btn-limpar");

                            function atualizarSelectOrdenado() {
                                const ordenados = [...anosValidos].sort((a, b) => a - b);
                                const anosSelecionados = new Set(Array.from(select.selectedOptions).map(opt => opt.value));
                                select.innerHTML = "";
                                for (const ano of ordenados) {
                                    const opt = document.createElement("option");
                                    opt.value = ano;
                                    opt.textContent = ano;
                                    if (ano === "2023" || anosSelecionados.has(ano)) opt.selected = true;
                                    select.prepend(opt);
                                }
                            }

                            atualizarSelectOrdenado();

                            const ctx = document.getElementById("grafico-el-nino").getContext("2d");

                            const chart = new Chart(ctx, {
                                type: "line",
                                data: {
                                    labels: mesesLabels,
                                    datasets: [
                                        {
                                            label: "2024",
                                            data: acumulados2024,
                                            backgroundColor: "rgba(255, 99, 132, 0.2)",
                                            borderColor: "rgb(255, 99, 132)",
                                            fill: true,
                                            tension: 0.4,
                                            pointRadius: 3
                                        }
                                    ]
                                },
                                options: {
                                    responsive: true,
                                    plugins: {
                                        tooltip: {
                                            callbacks: {
                                                label: (ctx) => `${ctx.dataset.label}: ${ctx.formattedValue} mm`
                                            }
                                        },
                                        legend: {
                                            display: true,
                                            position: "top",
                                            labels: { usePointStyle: true }
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            title: { display: true, text: "Chuva Acumulada (mm)" }
                                        },
                                        x: {
                                            title: { display: true, text: "M√™s" }
                                        }
                                    }
                                }
                            });

                            // Adiciona 2023 automaticamente se existir
                            if (acumuladosAnos["2023"]) {
                                chart.data.datasets.push({
                                    label: "2023",
                                    data: acumuladosAnos["2023"],
                                    backgroundColor: "rgba(54, 162, 235, 0.2)",
                                    borderColor: "rgb(54, 162, 235)",
                                    fill: true,
                                    tension: 0.4,
                                    pointRadius: 3
                                });
                                chart.update();
                                anosAdicionados.add("2023");
                            }

                            // ‚úÖ Adiciona automaticamente quando selecionado no <select>
                            select.addEventListener("change", () => {
                                const selecionados = Array.from(select.selectedOptions).map(opt => opt.value);
                                for (const ano of selecionados) {
                                    if (anosAdicionados.has(ano)) continue;

                                    chart.data.datasets.push({
                                        label: `${ano}`,
                                        data: acumuladosAnos[ano],
                                        backgroundColor: "rgba(54, 162, 235, 0.2)",
                                        borderColor: "rgb(54, 162, 235)",
                                        fill: true,
                                        tension: 0.4,
                                        pointRadius: 3
                                    });
                                    anosAdicionados.add(ano);
                                }
                                chart.update();
                            });

                            btnLimpar.addEventListener("click", () => {
                                chart.data.datasets = chart.data.datasets.filter(ds => ds.label === "2024");
                                chart.update();
                                anosAdicionados.clear();
                                anosAdicionados.add("2024");
                                atualizarSelectOrdenado();
                            });
                        });
                </script>


            </div>

            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 " style="background-color: #f8f9fa; ">
                <div class="col-12 d-flex flex-column reveal-item">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        O El Ni√±o Chegou
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <br><br>
                        <p>
                            <!-- Explique o que √© o El Ni√±o-->
                            El Ni√±o √© um fen√¥meno clim√°tico que ocorre quando as √°guas do Oceano Pac√≠fico equatorial se
                            aquecem mais do que o normal. Esse aquecimento afeta os padr√µes de vento e chuva em todo o
                            mundo, causando mudan√ßas significativas no clima.
                        </p>

                        <p>
                            O El Ni√±o √© um fen√¥meno clim√°tico natural que ocorre quando as √°guas do Oceano Pac√≠fico
                            Equatorial ficam mais quentes do que o normal. Essa eleva√ß√£o de temperatura altera a
                            circula√ß√£o dos ventos e influencia os padr√µes de chuva em diversas regi√µes do planeta ‚Äî
                            incluindo o Brasil.
                        </p>

                        <p>
                            Em Porto Alegre, isso significou mais dias chuvosos, solo saturado e rios que n√£o conseguiam
                            mais conter a √°gua.
                        </p>
                        <p>
                            O gr√°fico mostra o ac√∫mulo de chuva m√™s a m√™s. Veja como 2024 se compara com outros anos ‚Äî e
                            perceba como os extremos est√£o se tornando a nova norma.
                        </p>


                        <p class="font-weight-bold">
                            üéØ Use o menu para comparar com anos anteriores. Que padr√µes voc√™ consegue identificar?
                        </p>

                        <div class="alert alert-info mt-4" role="alert">
                            <strong>Dica:</strong> Selecione outros anos e compare como 2024 se comportou em rela√ß√£o aos
                            anos anteriores e passe o mouse sobre os pontos para visualizar os valores.
                        </div>




                        <div class="alert alert-warning d-flex align-items-center my-4" role="alert"
                            style="font-size: 1.15rem;">
                            <i class="fas fa-exchange-alt fa-lg mr-3 text-warning"></i>
                            <div>
                                <strong>Mas se o El Ni√±o traz chuva, o que acontece quando ele vai embora?</strong><br>
                                A resposta est√° no seu oposto: <span class="font-weight-bold text-primary">o fen√¥meno La
                                    Ni√±a</span>.
                            </div>
                        </div>

                        <hr>
                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima
                                se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 55px; height: 55px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o" id="explorarLaNina">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>

                        <script>
                            document.getElementById('explorarLaNina').addEventListener('click', function (e) {
                                e.preventDefault();
                                const target = document.querySelector('#la-nina');
                                if (target) {
                                    target.scrollIntoView({ behavior: 'smooth' });
                                }
                            });                                   
                        </script>


                    </div>
                </div>
            </div>



        </div>
    </div>


    <!---------------------------------------------------------------------------------------------------->
    <!-- Se√ß√£o La Ni√±a -->

    <div class="container-fluid reveal-section vh-100 d-flex align-items-center justify-content-center " id="la-nina">
        <div class="row">
            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 " style="background-color: #f8f9fa;">
                <div class="col-12 d-flex flex-column reveal-item">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        La Ni√±a: O Contraponto
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">

                        <p>
                            Se El Ni√±o aquece, La Ni√±a resfria. Esse fen√¥meno √© seu oposto direto ‚Äî e t√£o impactante
                            quanto.
                        </p>

                        <p>Quando as √°guas do Pac√≠fico ficam mais frias que o normal, os ventos e as chuvas mudam de
                            rumo. Enquanto o Norte e o Nordeste do Brasil recebem mais chuva, o Sul pode enfrentar
                            longos per√≠odos de estiagem.</p>

                        <p>A altern√¢ncia entre esses dois fen√¥menos ‚Äî El Ni√±o e La Ni√±a ‚Äî ocorre em ciclos de poucos
                            anos, mas ultimamente esses ciclos est√£o mais curtos e mais intensos. O motivo? Tudo indica
                            que o aquecimento global est√° por tr√°s disso.</p>

                        <p class="">
                            O gr√°fico ao lado compara, ano a ano, dois fatores fundamentais para o clima de Porto
                            Alegre:
                            a <strong>precipita√ß√£o total anual</strong> (barras azuis) e a <strong>temperatura m√©dia
                                anual</strong> (linha laranja).
                        </p>

                        <p class="font-weight-bold">üéØ Explore o gr√°fico ao lado para ver como a temperatura m√©dia e a
                            precipita√ß√£o total variaram ano a ano. Procure os anos de extremos e pense: o que mudou
                            nesses per√≠odos?</p>

                        <div class="alert alert-info mt-4" role="alert">
                            <strong>Dica:</strong> Passe o mouse sobre os pontos do gr√°fico para ver os valores e as
                            datas dos extremos.
                        </div>

                        <p class="">
                            Essa visualiza√ß√£o nos ajuda a perceber como esses dois elementos variam ao longo do tempo ‚Äî
                            e
                            como, muitas vezes,
                            parecem se comportar como uma verdadeira gangorra clim√°tica.
                        </p>


                        <div class="alert alert-warning d-flex align-items-center my-4" role="alert"
                            style="font-size: 1.15rem;">
                            <i class="fas fa-sun fa-lg mr-3 text-warning"></i>
                            <div>
                                <strong>Mas o clima n√£o muda s√≥ por causa dos oceanos.</strong><br>
                                Existem sinais ainda mais pr√≥ximos e diretos ‚Äî como a luz do sol nas nossas cidades.
                            </div>
                        </div>

                        <hr>

                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima
                                se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 55px; height: 55px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o" id="explorarRadiacao">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>

                        <script>
                            document.getElementById('explorarRadiacao').addEventListener('click', function (e) {
                                e.preventDefault();
                                const target = document.querySelector('#radiacao');
                                if (target) {
                                    target.scrollIntoView({ behavior: 'smooth' });
                                }
                            });                                   
                        </script>
                    </div>
                </div>
            </div>

            <!-- Gr√°ficos / Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center reveal-item"
                style="background-color: #f8f9fa;">

                <div class="mb-4 p-4 rounded shadow-sm bg-white border" id="charts">
                    <h4>üìä Precipita√ß√£o vs. Temperatura M√©dia Anual (2000‚Äì2024)</h4>
                    <hr>
                    <p class="text-muted mb-3">
                        <strong>üìä O que mostra?</strong><br>
                        Esta visualiza√ß√£o conjunta apresenta duas vari√°veis clim√°ticas essenciais observadas em Porto
                        Alegre: a <strong>precipita√ß√£o total</strong> acumulada por ano (em mm) e a <strong>temperatura
                            m√©dia</strong>
                        anual (em ¬∞C)
                        <br><br>

                        <strong>üìà Interpreta√ß√£o:</strong><br>
                        As <u>linhas tracejadas</u> correspondem √†s m√©dias hist√≥ricas de cada vari√°vel no per√≠odo de
                        <strong>2000 a 2024</strong>. Elas servem como refer√™ncia visual para identificar anos com
                        precipita√ß√£o ou temperatura acima ou abaixo do esperado, facilitando a percep√ß√£o de padr√µes
                        clim√°ticos.
                        <br><br>

                        <small class="text-muted d-block text-center mt-2">üí° Clique sobre os itens da legenda para
                            mostrar ou ocultar as vari√°veis.</small>
                    </p>

                    <canvas id="gangorraChart"></canvas>
                </div>

            </div>

            <script>
                async function carregarDados() {
                    const resposta = await fetch("./data/resumo_visualizacoes.json");
                    const dados = await resposta.json();

                    const anos = Object.keys(dados)
                        .filter(ano => !isNaN(ano) && ano !== "2025")
                        .sort((a, b) => parseInt(a) - parseInt(b));

                    const precipitacao = [];
                    const temperatura = [];

                    for (const ano of anos) {
                        const est = Object.values(dados[ano])[0];
                        precipitacao.push(est.precipitacao?.soma || null);
                        temperatura.push(est.temperatura?.media || null);
                    }

                    const valoresValidosPrecipitacao = precipitacao.filter(v => v !== null && v > 0);
                    const mediaPrecipitacao = valoresValidosPrecipitacao.reduce((a, b) => a + b, 0) / valoresValidosPrecipitacao.length;

                    const valoresValidosTemperatura = temperatura.filter(v => v !== null && v > 0);
                    const mediaTemperatura = valoresValidosTemperatura.reduce((a, b) => a + b, 0) / valoresValidosTemperatura.length;

                    const coresPrecipitacao = precipitacao.map(valor =>
                        valor !== null && valor > mediaPrecipitacao
                            ? 'rgba(0, 86, 179, 0.9)'  // azul escuro
                            : 'rgba(0, 123, 255, 0.5)' // azul claro
                    );

                    const linhaMediaPrecipitacao = new Array(anos.length).fill(mediaPrecipitacao);
                    const linhaMediaTemperatura = new Array(anos.length).fill(mediaTemperatura);

                    const ctx = document.getElementById('gangorraChart').getContext('2d');

                    new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: anos,
                            datasets: [
                                {
                                    label: 'Temperatura M√©dia (¬∞C)',
                                    data: temperatura,
                                    type: 'line',
                                    borderColor: '#FF8C00',
                                    backgroundColor: '#FF8C00',
                                    yAxisID: 'y1',
                                    tension: 0.4,
                                    pointRadius: 4,
                                    pointHoverRadius: 6,
                                    fill: false
                                },
                                {
                                    label: 'Precipita√ß√£o Total (mm)',
                                    data: precipitacao,
                                    backgroundColor: coresPrecipitacao,
                                    yAxisID: 'y',
                                    borderRadius: 6,
                                    borderSkipped: false
                                },

                                {
                                    label: 'M√©dia Temperatura',
                                    data: linhaMediaTemperatura,
                                    type: 'line',
                                    borderColor: 'rgba(255,140,0,0.5)',
                                    borderDash: [6, 6],
                                    pointRadius: 0,
                                    yAxisID: 'y1',
                                    fill: false,
                                    borderWidth: 1.5
                                },
                                {
                                    label: 'M√©dia Precipita√ß√£o',
                                    data: linhaMediaPrecipitacao,
                                    type: 'line',
                                    borderColor: 'rgba(0,123,255,0.5)',
                                    borderDash: [6, 6],
                                    pointRadius: 0,
                                    yAxisID: 'y',
                                    fill: false,
                                    borderWidth: 1.5
                                },
                            ]
                        },
                        options: {
                            responsive: true,
                            interaction: {
                                mode: 'index',
                                intersect: false
                            },
                            stacked: false,
                            plugins: {
                                tooltip: {
                                    mode: 'index',
                                    intersect: false,
                                    callbacks: {
                                        label: function (context) {
                                            const label = context.dataset.label || '';
                                            const valor = context.parsed.y;
                                            const index = context.dataIndex;

                                            if (label.includes('Precipita√ß√£o') && !label.includes('M√©dia')) {
                                                let extra = '';
                                                if (valor > mediaPrecipitacao) {
                                                    extra = ' ‚ö†Ô∏è Acima da m√©dia hist√≥rica!';
                                                }
                                                return `${label}: ${valor} mm${extra}`;
                                            } else if (label.includes('Temperatura') && !label.includes('M√©dia Temperatura')) {
                                                let extra = '';
                                                if (valor > mediaTemperatura) {
                                                    extra = ' ‚ö†Ô∏è Acima da m√©dia hist√≥rica!';
                                                }
                                                return `${label}: ${valor} ¬∞C${extra}`;
                                            } else {
                                                return `${label}: ${valor}`;
                                            }
                                        }
                                    }
                                },
                                legend: {
                                    position: 'top'
                                }
                            },
                            scales: {
                                y: {
                                    type: 'linear',
                                    display: true,
                                    position: 'left',
                                    title: {
                                        display: true,
                                        text: 'Precipita√ß√£o (mm)'
                                    },
                                    grid: {
                                        drawOnChartArea: true
                                    }
                                },
                                y1: {
                                    type: 'linear',
                                    display: true,
                                    position: 'right',
                                    grid: {
                                        drawOnChartArea: false
                                    },
                                    title: {
                                        display: true,
                                        text: 'Temperatura M√©dia (¬∞C)'
                                    }
                                }
                            }
                        }
                    });
                }

                carregarDados();
            </script>


        </div>
    </div>


    <!---------------------------------------------------------------------------------------------------->


    <!---------------------------------------------------------------------------------------------------->


    <div class="container-fluid reveal-section  vh-100 d-flex align-items-center justify-content-center " id="radiacao">
        <div class="row">

            <!-- Gr√°ficos / Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center reveal-item"
                style="background-color: #f8f9fa;">





                <div class="mb-4 p-4 rounded shadow-sm bg-white border" id="charts">
                    <h4 class="fw-bold mb-3">üìä Radia√ß√£o Solar Anual em Porto Alegre</h4>
                    <hr>
                    <p class="text-muted mb-3">
                        <strong>üîÜ O que representa?</strong><br>
                        A radia√ß√£o solar √© a principal fonte de energia t√©rmica na Terra. Ela influencia diretamente o
                        clima, a agricultura e a sensa√ß√£o t√©rmica, e sua varia√ß√£o ao longo dos anos pode sinalizar
                        mudan√ßas nos padr√µes atmosf√©ricos e na cobertura de nuvens.
                        <br><br>
                        Este gr√°fico mostra a <strong>radia√ß√£o solar acumulada anualmente</strong> em Porto Alegre com
                        base em dados da esta√ß√£o meteorol√≥gica A801, cobrindo o per√≠odo de <strong>2000 a 2024</strong>.
                        <br><br>

                    </p>

                    <div class="mb-4">
                        <label class="form-label">
                            üìÖ Selecione o intervalo de anos:
                            <span id="anoInicio" class="text-primary fw-semibold"></span> ‚Äì
                            <span id="anoFim" class="text-primary fw-semibold"></span>
                        </label>
                        <div id="rangeSlider"></div>
                    </div>

                    <canvas id="graficoRadiacaoArea" height=""></canvas>

                    <script>
                        fetch('./data/resumo_visualizacoes.json')
                            .then(res => res.json())
                            .then(dados => {
                                const estacao = "A801";
                                const anos = [];
                                const radiacao = [];

                                for (const ano in dados) {
                                    if (!isNaN(ano) && ano !== "2025" && dados[ano][estacao]?.radiacao_anual) {
                                        anos.push(ano);
                                        radiacao.push(dados[ano][estacao].radiacao_anual);
                                    }
                                }

                                const media = radiacao.reduce((a, b) => a + b, 0) / radiacao.length;

                                const canvas = document.getElementById("graficoRadiacaoArea");
                                const ctx = canvas.getContext("2d");

                                const chart = new Chart(ctx, {
                                    type: 'line',
                                    data: {
                                        labels: [...anos],
                                        datasets: [
                                            {
                                                label: "Radia√ß√£o Solar Anual (kJ/m¬≤)",
                                                data: [...radiacao],
                                                borderColor: "rgba(255, 165, 0, 0.9)",
                                                backgroundColor: "rgba(255, 165, 0, 0.1)",
                                                tension: 0.3,
                                                pointRadius: 5,
                                                pointHoverRadius: 7,
                                                pointBackgroundColor: [...radiacao].map(() => "rgba(255, 165, 0, 1)")
                                            },
                                            {
                                                label: "M√©dia Hist√≥rica (2000‚Äì2024)",
                                                data: Array(anos.length).fill(media),
                                                borderColor: "rgba(255, 99, 132, 0.7)",
                                                borderDash: [5, 5],
                                                pointRadius: 0,
                                                fill: false
                                            }
                                        ]
                                    },
                                    options: {
                                        interaction: {
                                            mode: 'nearest',
                                            intersect: false
                                        },
                                        responsive: true,
                                        plugins: {
                                            legend: {
                                                display: true,
                                                position: 'top'
                                            },
                                            tooltip: {
                                                callbacks: {
                                                    label: function (ctx) {
                                                        const valor = ctx.raw.toFixed(0);
                                                        const ano = ctx.label;
                                                        const valoresVisiveis = chart.data.datasets[0].data;
                                                        const max = Math.max(...valoresVisiveis);
                                                        const min = Math.min(...valoresVisiveis);
                                                        let comentario = "";
                                                        if (ctx.raw === max) comentario = " ‚Äî maior valor do per√≠odo";
                                                        if (ctx.raw === min) comentario = " ‚Äî menor valor do per√≠odo";
                                                        if (ctx.datasetIndex === 1) return `${ctx.dataset.label}: ${valor} kJ/m¬≤`;
                                                        return `Radia√ß√£o em ${ano}: ${valor} kJ/m¬≤${comentario}`;
                                                    }
                                                }
                                            }
                                        },
                                        scales: {
                                            y: {
                                                title: {
                                                    display: true,
                                                    text: "Energia acumulada (kJ/m¬≤)"
                                                }
                                            },
                                            x: {
                                                title: {
                                                    display: true,
                                                    text: "Ano"
                                                }
                                            }
                                        }
                                    }
                                });

                                // === Slider (estilo compat√≠vel com transforma√ß√µes clim√°ticas) ===
                                const slider = document.getElementById("rangeSlider");
                                const spanInicio = document.getElementById("anoInicio");
                                const spanFim = document.getElementById("anoFim");

                                noUiSlider.create(slider, {
                                    start: [2000, 2024],
                                    connect: true,
                                    step: 1,
                                    range: {
                                        min: 2000,
                                        max: 2024
                                    },
                                    format: {
                                        to: v => parseInt(v),
                                        from: v => parseInt(v)
                                    }
                                });

                                slider.noUiSlider.on("update", valores => {
                                    const [inicio, fim] = valores.map(v => parseInt(v));
                                    if (fim - inicio < 1) return;

                                    spanInicio.textContent = `${inicio}`;
                                    spanFim.textContent = `${fim}`;

                                    const iInicio = anos.indexOf(inicio.toString());
                                    const iFim = anos.indexOf(fim.toString()) + 1;

                                    chart.data.labels = anos.slice(iInicio, iFim);
                                    chart.data.datasets[0].data = radiacao.slice(iInicio, iFim);
                                    chart.data.datasets[1].data = Array(iFim - iInicio).fill(media);
                                    chart.update();
                                });
                            });
                    </script>
                </div>
            </div>



            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 " style="background-color: #f8f9fa; ">
                <div class="col-12 d-flex flex-column reveal-item">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        Radia√ß√£o Solar e Calor Urbano
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p>Dias mais quentes n√£o v√™m s√≥ do ar, mas tamb√©m da radia√ß√£o solar.</p>

                        <p>A <strong>radia√ß√£o solar</strong> representa a quantidade de energia que o Sol emite e que
                            chega √† superf√≠cie da Terra. Em Porto Alegre, os n√≠veis dessa radia√ß√£o t√™m aumentado de
                            forma consistente nos √∫ltimos anos.</p>


                        <p>Esse crescimento est√° ligado a fatores como o c√©u mais limpo, a redu√ß√£o da cobertura vegetal
                            e o ac√∫mulo de calor nas √°reas urbanas. Isso contribui para o agravamento das chamadas
                            <em>ilhas de calor</em>, tornando a cidade ainda mais quente, especialmente durante o ver√£o.
                        </p>


                        <p>Al√©m do desconforto t√©rmico, o aumento da radia√ß√£o solar intensifica os efeitos de fen√¥menos
                            clim√°ticos como o El Ni√±o, impactando diretamente a sa√∫de, o bem-estar e o cotidiano da
                            popula√ß√£o.</p>

                        <p class="font-weight-bold">üéØ No gr√°fico ao lado, veja como a radia√ß√£o solar anual tem crescido
                            e compare com a m√©dia hist√≥rica.</p>

                        <div class="alert alert-info mt-4" role="alert">
                            <strong>Dica:</strong> Use o controle deslizante para escolher um intervalo de anos e veja
                            como a radia√ß√£o solar variou em diferentes per√≠odos. Experimente selecionar anos extremos
                            para comparar com a m√©dia hist√≥rica.
                        </div>

                        <div class="alert alert-primary d-flex align-items-center my-4" role="alert"
                            style="font-size: 1.15rem;">
                            <i class="fas fa-wind fa-lg mr-3 text-primary"></i>
                            <div>
                                <strong>Mas ser√° que conseguimos prever quando um evento extremo est√° se
                                    aproximando?</strong><br>
                                √Äs vezes, a resposta est√° no ar ‚Äî literalmente.
                            </div>
                        </div>

                        <hr>

                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima
                                se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 55px; height: 55px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o" id="explorarPressao">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>

                        <script>
                            document.getElementById('explorarPressao').addEventListener('click', function (e) {
                                e.preventDefault();
                                const target = document.querySelector('#pressao');
                                if (target) {
                                    target.scrollIntoView({ behavior: 'smooth' });
                                }
                            });                                   
                        </script>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!---------------------------------------------------------------------------------------------------->


    <div class="container-fluid reveal-section  vh-100 d-flex align-items-center justify-content-center" id="pressao">
        <div class="row">

            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 " style="background-color: #f8f9fa; ">
                <div class="col-12 d-flex flex-column reveal-item">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        Press√£o Atmosf√©rica: Um Sinal Antecipado
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p>A press√£o atmosf√©rica √© um dos primeiros sinais de que o tempo vai mudar.</p>

                        <p> Mudan√ßas sutis na press√£o ao longo dos anos indicam transforma√ß√µes nos padr√µes clim√°ticos.
                            Tend√™ncias de baixa
                            press√£o podem estar associadas ao aumento de eventos extremos e √† instabilidade atmosf√©rica,
                            afetando diretamente
                            a vida nas cidades.</p>

                        <p>Antes da grande enchente de 2024, as esta√ß√µes registraram sucessivas quedas na press√£o ‚Äî um
                            alerta silencioso de que algo grande estava por vir.</p>
                        <p>Monitorar esses dados com aten√ß√£o pode ser a diferen√ßa entre preven√ß√£o e trag√©dia.</p>
                        <p class="font-weight-bold">üéØ Explore o gr√°fico ao lado para ver como a press√£o atmosf√©rica
                            variou nos dias que antecederam a enchente. Procure por padr√µes e mudan√ßas que possam
                            indicar eventos extremos.</p>

                        <div class="alert alert-secondary d-flex align-items-center my-4" role="alert"
                            style="font-size: 1.1rem;">
                            <i class="fas fa-arrow-down fa-lg mr-3 text-primary"></i>
                            <div>
                                <strong>Mas a press√£o n√£o age sozinha.</strong> O comportamento dos ventos tamb√©m
                                influencia ‚Äî e muito ‚Äî o que acontece com a umidade no ar.
                            </div>
                        </div>

                        <hr>

                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima
                                se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 55px; height: 55px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o" id="explorarVentos">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>

                        <script>
                            document.getElementById('explorarVentos').addEventListener('click', function (e) {
                                e.preventDefault();
                                const target = document.querySelector('#ventos');
                                if (target) {
                                    target.scrollIntoView({ behavior: 'smooth' });
                                }
                            });                                   
                        </script>

                    </div>
                </div>
            </div>

            <!-- Gr√°ficos / Mapa -->
            <!-- Gr√°ficos / Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 d-flex justify-content-center align-items-center reveal-item"
                style="background-color: #f8f9fa;">

                <div class="mb-4 p-4 rounded shadow-sm bg-white border w-100" id="charts">
                    <h4 class="fw-bold mb-3">üìä Press√£o Atmosf√©rica M√©dia Anual em Porto Alegre</h4>
                    <hr>
                    <p class="text-muted mb-3">
                        <strong>üß≠ O que representa?</strong><br>
                        A press√£o atmosf√©rica √© a for√ßa que o ar exerce sobre a superf√≠cie da Terra. Ela √© influenciada
                        por fatores como temperatura, altitude e sistemas meteorol√≥gicos ‚Äî incluindo frentes frias,
                        ciclones e zonas de alta press√£o.
                        <br><br>
                        Esse indicador √© essencial para entender a estabilidade do clima: <strong>valores mais
                            baixos</strong> tendem a indicar instabilidade, favorecendo a forma√ß√£o de chuvas e
                        tempestades, enquanto <strong>valores mais altos</strong> est√£o associados a per√≠odos de tempo
                        firme e seco.
                        <br><br>
                    <div class="mb-4">
                        <label class="form-label">
                            üìÖ Selecione o intervalo de anos:
                            <span id="range-inicio-pressao" class="text-primary fw-semibold"></span> ‚Äì
                            <span id="range-fim-pressao" class="text-primary fw-semibold"></span>
                        </label>
                        <div id="range-anos-pressao"></div>
                    </div>

                    <center>
                        <small class="text-muted">üí° Ajuste o per√≠odo para analisar tend√™ncias espec√≠ficas.</small>
                    </center>

                    </p>
                    <canvas id="graficoPressaoAnual" height=""></canvas>

                    <script>
                        fetch('./data/resumo_visualizacoes.json')
                            .then(res => res.json())
                            .then(dados => {
                                const anos = Object.keys(dados).filter(ano => !isNaN(ano)).sort();
                                const estacao = "A801";

                                const pressaoMediaOriginal = anos.map(ano => dados[ano]?.[estacao]?.pressao?.media ?? null);
                                const valoresValidos = pressaoMediaOriginal.filter(v => v !== null);
                                const mediaTotal = valoresValidos.reduce((a, b) => a + b, 0) / valoresValidos.length;

                                const canvas = document.getElementById('graficoPressaoAnual');
                                const ctx = canvas.getContext('2d');

                                const chart = new Chart(ctx, {
                                    type: 'line',
                                    data: {
                                        labels: [...anos],
                                        datasets: [
                                            {
                                                label: 'Press√£o M√©dia Anual (mb)',
                                                data: [...pressaoMediaOriginal],
                                                borderWidth: 2,
                                                borderColor: '#2980b9',
                                                backgroundColor: 'rgba(41, 128, 185, 0.1)',
                                                pointBackgroundColor: '#2980b9',
                                                pointBorderColor: '#fff',
                                                pointRadius: 4,
                                                tension: 0.3,
                                                fill: true
                                            },
                                            {
                                                label: `M√©dia Hist√≥rica (2000‚Äì2024)`,
                                                data: Array(anos.length).fill(mediaTotal),
                                                borderWidth: 1.5,
                                                borderColor: '#e74c3c',
                                                borderDash: [6, 4],
                                                pointRadius: 0,
                                                fill: false
                                            }
                                        ]
                                    },
                                    options: {
                                        responsive: true,
                                        interaction: {
                                            mode: 'nearest',
                                            intersect: false
                                        },
                                        plugins: {
                                            tooltip: {
                                                backgroundColor: '#fff',
                                                titleColor: '#000',
                                                bodyColor: '#333',
                                                borderColor: '#ccc',
                                                borderWidth: 1,
                                                padding: 10,
                                                cornerRadius: 6,
                                                callbacks: {
                                                    label: ctx => {
                                                        const v = ctx.raw;
                                                        return `${ctx.dataset.label}: ${v != null ? v.toFixed(1) + " mb" : "N/A"}`;
                                                    }
                                                }
                                            },
                                            legend: {
                                                display: true,
                                                position: 'top',
                                                labels: {
                                                    boxWidth: 12,
                                                    font: { size: 12 }
                                                }
                                            }
                                        },
                                        scales: {
                                            y: {
                                                title: {
                                                    display: true,
                                                    text: 'Press√£o (mb)',
                                                    font: { size: 12 }
                                                },
                                                ticks: { font: { size: 12 } }
                                            },
                                            x: {
                                                title: {
                                                    display: true,
                                                    text: 'Ano',
                                                    font: { size: 12 }
                                                },
                                                ticks: { font: { size: 12 } }
                                            }
                                        }
                                    }
                                });

                                // === Range Slider ===
                                const slider = document.getElementById("range-anos-pressao");
                                const spanInicio = document.getElementById("range-inicio-pressao");
                                const spanFim = document.getElementById("range-fim-pressao");

                                noUiSlider.create(slider, {
                                    start: [2000, 2024],
                                    connect: true,
                                    step: 1,
                                    range: {
                                        min: 2000,
                                        max: 2024
                                    },
                                    format: {
                                        to: value => parseInt(value),
                                        from: value => parseInt(value)
                                    }
                                });

                                slider.noUiSlider.on("update", valores => {
                                    const [inicio, fim] = valores.map(v => parseInt(v));
                                    spanInicio.textContent = `${inicio}`;
                                    spanFim.textContent = `${fim}`;

                                    const iInicio = anos.indexOf(inicio.toString());
                                    const iFim = anos.indexOf(fim.toString()) + 1;

                                    const anosFiltrados = anos.slice(iInicio, iFim);
                                    const dadosFiltrados = pressaoMediaOriginal.slice(iInicio, iFim);
                                    const mediaLocal = dadosFiltrados.filter(v => v !== null).reduce((a, b) => a + b, 0) / dadosFiltrados.filter(v => v !== null).length;

                                    chart.data.labels = anosFiltrados;
                                    chart.data.datasets[0].data = dadosFiltrados;
                                    chart.data.datasets[1].data = Array(anosFiltrados.length).fill(mediaLocal);
                                    chart.update();
                                });
                            });
                    </script>

                </div>
            </div>


        </div>
    </div>


    <!---------------------------------------------------------------------------------------------------->
    <!-- Se√ß√£o Ventos e Umidade -->

    <div class="container-fluid reveal-section  vh-100 d-flex align-items-center justify-content-center " id="ventos">
        <div class="row">

            <!-- Gr√°ficos / Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center reveal-item"
                style="background-color: #f8f9fa;">


                <div class="mb-4 p-4 rounded shadow-sm bg-white border" id="charts">
                    <h4>üìä Gr√°fico de Velocidade M√©dia dos Ventos (2000‚Äì2024)</h4>
                    <hr>
                    <p class="text-muted mb-3">
                        <strong>üìä O que mostra?</strong><br>
                        Este gr√°fico exibe a <strong>velocidade m√©dia anual dos ventos</strong> em Porto Alegre, com
                        base nos dados da esta√ß√£o A801. Os ventos desempenham papel importante no equil√≠brio clim√°tico,
                        na sensa√ß√£o t√©rmica e na forma√ß√£o de frentes frias e tempestades.
                        <br><br>
                        <strong>üîç Como interagir?</strong><br>
                        Utilize o controle deslizante abaixo para selecionar um intervalo de anos. O gr√°fico se ajustar√°
                        automaticamente e destacar√° o <strong class="text-success">ano mais ventoso</strong> e o <strong
                            class="text-danger">ano mais calmo</strong>.
                        <br><br>
                        Passe o mouse sobre os pontos para visualizar os valores detalhados.
                    </p>

                    <div class="mb-4">
                        <label class="form-label">
                            üìÖ Intervalo Selecionado: <span id="rangeAnosTexto" class="text-primary fw-semibold">2000 ‚Äì
                                2024</span>
                        </label>
                        <div id="sliderIntervaloVento"></div>
                    </div>
                    <div class="d-flex justify-content-center align-items-center my-4">
                        <canvas id="graficoLinhaVento" height="160"></canvas>
                    </div>
                    <script>
                        fetch('./data/resumo_visualizacoes.json')
                            .then(res => res.json())
                            .then(dados => {
                                const estacao = "A801";
                                const anos = [];
                                const vento = [];

                                for (const ano in dados) {
                                    if (!isNaN(ano) && ano !== "2025" && dados[ano][estacao]?.vento?.media) {
                                        anos.push(ano);
                                        vento.push(dados[ano][estacao].vento.media);
                                    }
                                }

                                const anosNum = anos.map(a => parseInt(a));
                                const ctx = document.getElementById("graficoLinhaVento").getContext("2d");

                                const chart = new Chart(ctx, {
                                    type: 'line',
                                    data: {
                                        labels: [...anos],
                                        datasets: [{
                                            label: "Velocidade M√©dia dos Ventos (m/s)",
                                            data: [...vento],
                                            borderColor: "#007bff",
                                            backgroundColor: "rgba(0, 123, 255, 0.1)",
                                            tension: 0.3,
                                            pointRadius: 5,
                                            pointHoverRadius: 7,
                                            pointBackgroundColor: [...vento].map(() => "#007bff") // ser√° atualizado depois
                                        }]
                                    },
                                    options: {
                                        interaction: {
                                            mode: 'nearest',
                                            intersect: false
                                        },
                                        responsive: true,
                                        plugins: {
                                            title: {
                                                display: false,
                                                text: "Velocidade M√©dia dos Ventos em Porto Alegre (2000‚Äì2024)"
                                            },
                                            tooltip: {
                                                callbacks: {
                                                    label: function (ctx) {
                                                        const valor = ctx.raw.toFixed(2);
                                                        const ano = ctx.label;
                                                        const valoresVisiveis = chart.data.datasets[0].data;
                                                        const max = Math.max(...valoresVisiveis);
                                                        const min = Math.min(...valoresVisiveis);
                                                        let comentario = "";
                                                        if (ctx.raw === max) comentario = " ‚Äî ano mais ventoso";
                                                        if (ctx.raw === min) comentario = " ‚Äî ano mais calmo";
                                                        return `Vento m√©dio em ${ano}: ${valor} m/s${comentario}`;
                                                    }
                                                }
                                            },
                                            legend: {
                                                display: false
                                            }
                                        },
                                        scales: {
                                            y: {
                                                title: {
                                                    display: true,
                                                    text: "Velocidade (m/s)"
                                                },
                                                beginAtZero: true
                                            },
                                            x: {
                                                title: {
                                                    display: true,
                                                    text: "Ano"
                                                }
                                            }
                                        }
                                    }
                                });

                                // === Cria√ß√£o do slider ===
                                const slider = document.getElementById("sliderIntervaloVento");
                                const spanTexto = document.getElementById("rangeAnosTexto");

                                noUiSlider.create(slider, {
                                    start: [2000, 2024],
                                    connect: true,
                                    step: 1,
                                    range: {
                                        min: 2000,
                                        max: 2024
                                    },
                                    format: {
                                        to: v => parseInt(v),
                                        from: v => parseInt(v)
                                    }
                                });

                                slider.noUiSlider.on("update", valores => {
                                    const [anoInicio, anoFim] = valores.map(v => parseInt(v));
                                    spanTexto.textContent = `${anoInicio} ‚Äì ${anoFim}`;

                                    const iInicio = anos.findIndex(a => parseInt(a) === anoInicio);
                                    const iFim = anos.findIndex(a => parseInt(a) === anoFim) + 1;

                                    const anosFiltrados = anos.slice(iInicio, iFim);
                                    const ventoFiltrado = vento.slice(iInicio, iFim);

                                    // Recalcular destaques
                                    const max = Math.max(...ventoFiltrado);
                                    const min = Math.min(...ventoFiltrado);

                                    const cores = ventoFiltrado.map(v => {
                                        if (v === max) return "#28a745"; // verde
                                        if (v === min) return "#dc3545"; // vermelho
                                        return "#007bff";               // padr√£o
                                    });

                                    chart.data.labels = anosFiltrados;
                                    chart.data.datasets[0].data = ventoFiltrado;
                                    chart.data.datasets[0].pointBackgroundColor = cores;
                                    chart.update();
                                });
                            });
                    </script>
                </div>







            </div>


            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 " style="background-color: #f8f9fa; ">
                <div class="col-12 d-flex flex-column reveal-item">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        Ventos e Umidade
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p><strong>Em 2024, os ventos n√£o sopraram a favor.</strong> Literalmente.</p>

                        <p>
                            Correntes de ar mais fracas e mal distribu√≠das impediram a dissipa√ß√£o das nuvens sobre Porto
                            Alegre,
                            criando as condi√ß√µes ideais para o ac√∫mulo de umidade na atmosfera.
                        </p>

                        <p>
                            O resultado? <strong>C√©u carregado, sensa√ß√£o t√©rmica elevada e chuvas persistentes.</strong>
                        </p>

                        <p>
                            Ventos mais intensos normalmente ajudam a estabilizar o clima, dispersar poluentes e reduzir
                            o calor acumulado. J√° a aus√™ncia de movimento no ar favorece a forma√ß√£o de <em>ilhas de
                                calor</em>,
                            aumenta o desconforto t√©rmico e dificulta o equil√≠brio atmosf√©rico ‚Äî especialmente em
                            centros urbanos densos como a capital ga√∫cha.
                        </p>

                        <p>
                            Al√©m disso, a falta de circula√ß√£o compromete a qualidade do ar e retarda a dissipa√ß√£o da
                            umidade,
                            criando um ambiente prop√≠cio para tempestades longas e abafamento extremo. O clima fica
                            estagnado,
                            e qualquer varia√ß√£o t√©rmica pode desencadear eventos severos.
                        </p>

                        <p>
                            Foi o que vimos em 2024: um ciclo de estagna√ß√£o atmosf√©rica, satura√ß√£o h√≠drica e recorr√™ncia
                            de chuvas intensas,
                            que deixou a cidade em estado de alerta por semanas.
                        </p>

                        <strong>
                            üéØ Interaja com o gr√°fico para descobrir quais foram os anos mais ventosos e os mais calmos
                            entre 2000 e 2024.
                        </strong>

                        <div class="alert alert-info d-flex align-items-center my-4" role="alert"
                            style="font-size: 1.1rem;">
                            <i class="fas fa-tint fa-lg mr-3 text-info"></i>
                            <div>
                                <strong>E quando a umidade sobe e o ar j√° n√£o consegue mais absorver, surge um sinal
                                    claro:</strong>
                                <br>
                                <span class="font-weight-bold">o ponto de orvalho.</span>
                            </div>
                        </div>


                        <hr>

                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima
                                se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 55px; height: 55px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o" id="explorarPontoOrvalho">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>
                        <script>
                            document.getElementById('explorarPontoOrvalho').addEventListener('click', function (e) {
                                e.preventDefault();
                                const target = document.querySelector('#pontoOrvalho');
                                if (target) {
                                    target.scrollIntoView({ behavior: 'smooth' });
                                }
                            });                                   
                        </script>
                    </div>
                </div>
            </div>



        </div>
    </div>


    <!---------------------------------------------------------------------------------------------------->
    <!-- Se√ß√£o Ponto de Orvalho -->

    <div class="container-fluid reveal-section  vh-100 d-flex align-items-center justify-content-center "
        id="pontoOrvalho">
        <div class="row">

            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6" style="background-color: #f8f9fa;">
                <div class="col-12 d-flex flex-column reveal-item">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        O Ponto de Orvalho
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p>O <strong>ponto de orvalho</strong> indica o momento em que o ar atinge sua capacidade m√°xima
                            de reter vapor de √°gua. Quando esse limite √© ultrapassado, o excesso se transforma em
                            neblina, orvalho, nuvens ou tempestade.</p>

                        <p>Durante epis√≥dios de <strong>El Ni√±o</strong>, √© comum que esse ponto suba ‚Äî sinal de um ar
                            saturado, onde qualquer leve resfriamento pode gerar <em>condensa√ß√£o repentina</em> e,
                            principalmente, <strong>chuvas intensas</strong>.</p>

                        <p>Em 2024, os registros apontaram pontos de orvalho elevados com frequ√™ncia. Foi um aviso
                            sutil, mas constante: a atmosfera estava carregada e pronta para extremos.</p>

                        <p>
                            Ignorado por muitos, esse dado meteorol√≥gico funciona como um sensor clim√°tico natural. Ele
                            antecipa mudan√ßas, denuncia desequil√≠brios e oferece pistas valiosas para quem sabe
                            observ√°-lo.
                        </p>

                        <strong class="font-weight-semibold">üéØ Acompanhar esse dado quase invis√≠vel pode ser a chave
                            para antecipar eventos severos antes que eles aconte√ßam.</strong>

                        <hr class="my-4">

                        <div class="alert alert-info d-flex align-items-center my-4" role="alert"
                            style="font-size: 1.1rem;">
                            <i class="fas fa-tint fa-lg mr-3 text-info"></i>
                            <div>
                                Compreender o clima vai al√©m de analisar gr√°ficos: √© <strong>interpretar sinais,
                                    antecipar extremos</strong> e transformar dados em a√ß√£o.<br>
                                O futuro ‚Äî que j√° come√ßou ‚Äî pede escolhas informadas, baseadas em evid√™ncias e n√£o
                                apenas em intui√ß√£o.
                            </div>
                        </div>

                        <p class="text-muted font-italic mt-3">
                            Nem sempre o perigo se anuncia com trov√µes. √Äs vezes, ele est√° escondido na umidade
                            silenciosa do ar.
                        </p>
                    </div>


                    <hr>

                    <div class="end-content w-100 text-center mt-4">
                        <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima
                            se√ß√£o.</p>
                        <button class="btn btn-primary rounded-circle shadow" style="width: 55px; height: 55px;"
                            id="explorarAgora" aria-label="Ir para a pr√≥xima se√ß√£o">
                            <span style="font-size: 1.7em; vertical-align: middle;" aria-hidden="true">&#8595;</span>
                        </button>
                    </div>

                    <script>
                        document.getElementById('explorarAgora').addEventListener('click', function (e) {
                            e.preventDefault();
                            const target = document.querySelector('#agora');
                            if (target) {
                                target.scrollIntoView({ behavior: 'smooth' });
                            }
                        });                                   
                    </script>

                </div>

            </div>

            <!-- Gr√°ficos / Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center reveal-item"
                style="background-color: #f8f9fa;">


                <div class="mb-4 p-4 rounded shadow-sm bg-white border" id="charts">
                    <h4>üìä Evolu√ß√£o do Ponto de Orvalho em Porto Alegre</h4>
                    <hr>
                    <p class="text-muted mb-3">
                        <strong>üå°Ô∏è O que √©?</strong><br>
                        O ponto de orvalho √© a temperatura na qual o ar precisa ser resfriado para que o vapor de √°gua
                        se condense, formando got√≠culas ‚Äî ou seja, √© um indicador direto da umidade do ar. Quanto maior
                        o ponto de orvalho, mais √∫mido est√° o ambiente.
                        <br><br>
                        <strong>üìä Como interpretar?</strong><br>
                        Este gr√°fico mostra a m√©dia anual do ponto de orvalho em Porto Alegre desde o ano 2000. As
                        barras s√£o coloridas em gradiente: quanto mais quente a cor, maior o valor. Valores elevados
                        podem indicar sensa√ß√£o de abafamento e maior desconforto t√©rmico.
                    </p>
                    <br>

                    <canvas id="graficoPontoOrvalho"></canvas>
                    

                    <script>
                        fetch('./data/resumo_visualizacoes.json')
                            .then(res => res.json())
                            .then(dados => {
                                const estacao = "A801";
                                const anos = Object.keys(dados).filter(ano => !isNaN(ano) && ano !== "2025").sort();
                                const valores = anos.map(ano =>
                                    dados[ano]?.[estacao]?.ponto_orvalho?.media ?? null
                                );

                                const maxVal = Math.max(...valores.filter(v => v !== null));
                                const minVal = Math.min(...valores.filter(v => v !== null));

                                const cores = valores.map(v => {
                                    if (v === null) return 'rgba(200, 200, 200, 0.3)';
                                    const pct = (v - minVal) / (maxVal - minVal);
                                    const r = Math.floor(255 * pct);
                                    const g = Math.floor(255 * (1 - pct));
                                    return `rgba(${r}, ${g}, 100, 0.8)`;
                                });

                                const mediaGeral = (
                                    valores.reduce((acc, val) => val !== null ? acc + val : acc, 0) /
                                    valores.filter(v => v !== null).length
                                );

                                const interpretarPontoOrvalho = v => {
                                    if (v < 10) return 'Ar seco';
                                    if (v < 16) return 'Confort√°vel';
                                    if (v < 20) return 'Moderadamente √∫mido';
                                    return 'Muito √∫mido';
                                };

                                new Chart(document.getElementById('graficoPontoOrvalho'), {
                                    type: 'bar',
                                    data: {
                                        labels: anos,
                                        datasets: [
                                            {
                                                label: 'Ponto de Orvalho M√©dio (¬∞C)',
                                                data: valores,
                                                backgroundColor: cores,
                                                borderWidth: 1,
                                                order: 2
                                            },
                                            {
                                                type: 'line',
                                                label: 'M√©dia hist√≥rica',
                                                data: Array(valores.length).fill(mediaGeral),
                                                borderColor: 'black',
                                                borderDash: [5, 5],
                                                pointRadius: 0,
                                                borderWidth: 1.5,
                                                order: 1
                                            }
                                        ]
                                    },
                                    options: {
                                        
                                        responsive: true,
                                        plugins: {
                                            title: {
                                                display: true,
                                                text: 'Ponto de Orvalho M√©dio Anual (2000‚Äì2024)'
                                            },
                                            tooltip: {
                                                callbacks: {
                                                    label: ctx => {
                                                        if (ctx.dataset.type === 'line') {
                                                            return `M√©dia hist√≥rica: ${mediaGeral.toFixed(1)} ¬∞C`;
                                                        }
                                                        const valor = ctx.raw?.toFixed(1);
                                                        const interpretacao = interpretarPontoOrvalho(ctx.raw);
                                                        return `${valor} ¬∞C ‚Äî ${interpretacao} (m√©dia: ${mediaGeral.toFixed(1)} ¬∞C)`;
                                                    }
                                                }
                                            },
                                            legend: {
                                                labels: {
                                                    filter: item => item.text !== 'M√©dia hist√≥rica' || item.datasetIndex === 1
                                                }
                                            }
                                        },
                                        scales: {
                                            y: {
                                                beginAtZero: false,
                                                title: {
                                                    display: true,
                                                    text: 'Ponto de Orvalho (¬∞C)'
                                                }
                                            },
                                            x: {
                                                title: {
                                                    display: true,
                                                    text: 'Ano'
                                                }
                                            }
                                        }
                                    }
                                });
                            });
                    </script>



                </div>
            </div>




        </div>
    </div>

    <div class="container-fluid reveal-section vh-100 d-flex align-items-center justify-content-center" id="agora">
        <section class="col-sm-12 col-md-12 col-lg-10 mx-auto reveal-item"
            style="padding: 60px 15px; background-color: #f8f9fa;">
            <div class="text-center">
                <h2 class="fw-bold mb-3" style="font-size:2.2rem;">E agora? ü§î</h2>
                <br>
                <p class="lead mb-4" style="font-size:1.3rem;" style="max-width: 800px; margin: 0 auto;">
                    Ao longo desta jornada, voc√™ viu como Porto Alegre √© afetada pelas mudan√ßas clim√°ticas <br>e como os
                    dados, quando bem apresentados, nos ajudam a entender e reagir a esses desafios.
                </p>
                <br>
                <p class="lead mb-4" style="font-size:1.3rem;" style="max-width: 800px; margin: 0 auto;">
                    Os gr√°ficos, os mapas e as s√©ries temporais contaram uma hist√≥ria real. <br>Mas essa hist√≥ria
                    continua ‚Äî
                    e est√° sendo escrita todos os dias.
                </p>


                <br><br>

                <!--Crie um bot√£o animado com uma seta apontando para baixo-->
                <div class="d-flex justify-content-center">
                    <button class="btn btn-primary rounded-circle shadow animate-bounce"
                        style="width: 55px; height: 55px;" id="explorarAlem">
                        <span style="font-size: 1.7em; vertical-align: middle;" aria-hidden="true">&#8595;</span>
                    </button>
                </div>


                <script>
                    document.getElementById('explorarAlem').addEventListener('click', function (e) {
                        e.preventDefault();
                        const target = document.querySelector('#irAlem');
                        if (target) {
                            target.scrollIntoView({ behavior: 'smooth' });
                        }
                    });                                   
                </script>

            </div>
        </section>
    </div>

    <div class="container-fluid reveal-section vh-100 d-flex align-items-center justify-content-center" id="irAlem">
        <div class="col-12 text-center mt-5 reveal-item">
            <h2 class="fw-bold mb-3" style="font-size:2.2rem;">üöÄ Pronto para ir al√©m? üåé</h2>
            <br>
            <p class="lead mb-4" style="font-size:1.3rem;">
                Voc√™ j√° viu como o clima est√° mudando em Porto Alegre. Mas essa hist√≥ria n√£o para aqui.<br><br>
                No nosso dashboard interativo, voc√™ pode explorar dados de diferentes cidades e regi√µes, comparar
                per√≠odos, descobrir tend√™ncias e gerar seus pr√≥prios insights. <br>
                Encontre padr√µes, fa√ßa perguntas e ajude a construir o futuro do clima com informa√ß√£o e an√°lise.
            </p>
            <br>
            <a href="dashboard.html" class="btn  btn-primary px-5 py-3 shadow" style="font-size:1.3rem;">
                <i class="fas fa-chart-line me-2"></i> Explorar o Dashboard <i class="fas fa-arrow-right ms-2"></i>
            </a>

            <br><br><br>
            <p class="mb-4" style="font-size:1.1rem;">
                Clique no bot√£o acima e mergulhe em uma experi√™ncia interativa no nosso <b>Dashboard de Dados
                    Clim√°ticos</b>!<br>
                <span class="text-primary fw-semibold">Descubra tend√™ncias, fa√ßa suas pr√≥prias an√°lises e compartilhe
                    descobertas.</span>
            </p>

        </div>
    </div>













    <!-- Rodap√© -->
    <footer class="bg-light text-center text-lg-start">
        <div class="text-center p-4" style="background-color: #f8f9fa;">
            2025 ¬© Todos os direitos reservados.
        </div>


        <script>
            // Revela os elementos da se√ß√£o aos poucos
            document.addEventListener("DOMContentLoaded", function () {
                function revealSequentially(items, delay = 350) {
                    items.forEach((item, idx) => {
                        setTimeout(() => {
                            item.classList.add('visible');
                        }, idx * delay);
                    });
                }

                const section = document.getElementById('estacoes-meteorologicas');
                const revealItems = section.querySelectorAll('.reveal-item');
                let revealed = false;

                function handleReveal(entries, observer) {
                    entries.forEach(entry => {
                        if (entry.isIntersecting && !revealed) {
                            revealSequentially(Array.from(revealItems));
                            revealed = true;
                            observer.disconnect();
                        }
                    });
                }

                const observer = new IntersectionObserver(handleReveal, { threshold: 0.2 });
                observer.observe(section);
            });
        </script>

        <!-- Mapa e gr√°fico de esta√ß√µes -->
        <script>
            const map = L.map('map').setView([-30.5, -53], 7.0);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors'
            }).addTo(map);

            let marcadores = [];
            let estacoes = [];
            let intervalo = null;
            let chart;

            async function carregarEstacoes() {
                const resp = await fetch('./data/estacoes.json');
                estacoes = await resp.json();
                atualizarMapa(parseInt(document.getElementById('yearSlider').value));
                desenharGrafico();
            }

            function normalizarData(data) {
                if (data.includes('/')) {
                    const [dia, mes, ano] = data.split('/');
                    return `${ano.length === 2 ? '20' + ano : ano}-${mes.padStart(2, '0')}-${dia.padStart(2, '0')}`;
                }
                return data;
            }

            function formatarDataParaBR(dataISO) {
                const [ano, mes, dia] = dataISO.split('-');
                return `${dia}/${mes}/${ano}`;
            }

            function atualizarMapa(ano) {
                marcadores.forEach(m => map.removeLayer(m));
                marcadores = [];

                estacoes
                    .map(est => ({ ...est, data_fundacao: normalizarData(est.data_fundacao) }))
                    .filter(est => parseInt(est.data_fundacao.substring(0, 4)) <= ano)
                    .forEach(est => {
                        const dataBR = formatarDataParaBR(est.data_fundacao);
                        const marker = L.marker([est.latitude, est.longitude])
                            .bindPopup(`
                                <div style="min-width:200px;">
                                    <h5 style="margin-bottom: 0.5em; color: #1976d2;">
                                        <i class="fas fa-map-marker-alt me-2"></i> ${est.estacao}
                                    </h5>
                                    <p style="margin-bottom: 0.3em;">
                                        <span class="badge bg-primary text-white" style="font-size:0.9em;"> ${est.uf}</span>
                                    </p>
                                    <p style="margin-bottom: 0.3em;">
                                        <i class="fas fa-calendar-alt me-1"></i><strong> Coletando dados de:</strong> ${dataBR}
                                    </p>
                                    ${est.municipio ? `<p style="margin-bottom: 0.3em;"><i class="fas fa-city me-1"></i><strong> Munic√≠pio:</strong> ${est.municipio}</p>` : ''}
                                    ${est.altitude ? `<p style="margin-bottom: 0.3em;"><i class="fas fa-mountain me-1"></i><strong> Altitude:</strong> ${est.altitude} m</p>` : ''}
                                    ${est.tipo ? `<p style="margin-bottom: 0.3em;"><i class="fas fa-info-circle me-1"></i><strong> Tipo:</strong> ${est.tipo}</p>` : ''}
                                </div>
                            `)
                            .addTo(map);
                        marcadores.push(marker);
                    });
            }

            function desenharGrafico() {
                const anos = {};
                estacoes.forEach(est => {
                    const ano = parseInt(normalizarData(est.data_fundacao).substring(0, 4));
                    anos[ano] = (anos[ano] || 0) + 1;
                });
                const labels = Object.keys(anos).sort((a, b) => a - b);
                const dados = labels.map(ano => anos[ano]);

                const ctx = document.getElementById('graficoEstacoes').getContext('2d');
                chart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels,
                        datasets: [{
                            label: 'Esta√ß√µes por Ano de Funda√ß√£o',
                            data: dados,
                            backgroundColor: 'rgba(54, 162, 235, 0.6)'
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                mode: 'index',   // Mostra todos os datasets no √≠ndice
                                intersect: false,
                                callbacks: {
                                    label: ctx => {
                                        const valor = ctx.raw?.toFixed(1);
                                        if (ctx.dataset.type === 'line') {
                                            return `M√©dia hist√≥rica: ${valor} ¬∞C`;
                                        }
                                        const interpretacao = interpretarPontoOrvalho(ctx.raw);
                                        return `${valor} ¬∞C ‚Äî ${interpretacao} (m√©dia: ${mediaGeral.toFixed(1)} ¬∞C)`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: { title: { display: true, text: 'Ano' } },
                            y: { title: { display: true, text: 'N√∫mero de Esta√ß√µes' }, beginAtZero: true }
                        }
                    }
                });

                if (marcadores.length > 0) {
                    const popupContent = marcadores[0].getPopup().getContent();
                    const instrucoes = `<hr><p class='text-center'><strong> üìç ESTE MAPA √â INTERATIVO</strong><p class='text-muted'>Clique nas esta√ß√µes para ver mais detalhes.</p></p>`;
                    marcadores[0].getPopup().setContent(popupContent + instrucoes);
                    marcadores[0].openPopup();
                }
            }

            const slider = document.getElementById('yearSlider');
            const label = document.getElementById('yearLabel');
            const btn = document.getElementById('playBtn');
            //const resetBtn = document.getElementById('resetBtn');

            slider.addEventListener('input', () => {
                const ano = parseInt(slider.value);
                label.textContent = ano;
                atualizarMapa(ano);
            });

            //resetBtn.addEventListener('click', () => {
            //    map.setView([-30.5, -53], 6.5)
            //});

            btn.addEventListener('click', () => {
                if (intervalo) {
                    clearInterval(intervalo);
                    intervalo = null;
                    btn.textContent = '‚ñ∂Ô∏è Ver evolu√ß√£o';
                } else {
                    if (parseInt(slider.value) >= 2025) {
                        slider.value = 2000;
                        label.textContent = 2000;
                        atualizarMapa(2000);
                    }
                    intervalo = setInterval(() => {
                        let ano = parseInt(slider.value);
                        if (ano < 2025) {
                            ano++;
                            slider.value = ano;
                            label.textContent = ano;
                            atualizarMapa(ano);
                        } else {
                            clearInterval(intervalo);
                            intervalo = null;
                            btn.textContent = '‚ñ∂Ô∏è Reproduzir novamente';
                            setTimeout(() => {
                                btn.textContent = '‚ñ∂Ô∏è Ver evolu√ß√£o';
                            }, 2000);
                        }
                    }, 150);
                    btn.textContent = '‚è∏Ô∏è Pausar';
                }
            });

            carregarEstacoes();
        </script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const observerOptions = {
                    threshold: 0.4
                };

                function animateItems(items) {
                    items.forEach((item, idx) => {
                        setTimeout(() => {
                            item.style.transition = 'opacity 0.7s ease, transform 0.7s ease';
                            item.style.opacity = 1;
                            item.style.transform = 'translateY(0)';
                        }, idx * 100);
                    });
                }

                const revealSections = document.querySelectorAll('.reveal-section');

                revealSections.forEach(section => {
                    const items = section.querySelectorAll('.reveal-item, .poa-reveal');

                    if (!items.length) return;

                    let hasRevealed = false;

                    const observer = new IntersectionObserver((entries, obs) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting && !hasRevealed) {
                                animateItems(items);
                                hasRevealed = true;
                                obs.disconnect();
                            }
                        });
                    }, observerOptions);

                    observer.observe(section);
                });
            });
        </script>



        <script src="./assets/js/script.js"></script>
        <script src="./assets/js/d3-charts.js"></script>
        <script src="./assets/js/jquery-3.5.1.slim.min.js"></script>
        <script src="./assets/js/popper.min.js"></script>
        <script src="./assets/js/bootstrap.min.js"></script>
        <script src="./assets/js/papaparse.min.js"></script>
</body>

</html>

</body>