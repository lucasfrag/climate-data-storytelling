<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Climate Date Storytelling</title>
    <link rel="stylesheet" href="./assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" href="./assets/css/leaflet.css" />
    <link rel="stylesheet" href="./assets/css/styles.css">

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>
    <!-- Hero Section -->
    <section class="hero-section d-flex align-items-center justify-content-center text-center vh-100"
        style="min-height: 100vh; width: 100%; padding: 0; background: linear-gradient(120deg, #1976d2 0%, #42a5f5 100%); color: #fff;">
        <div class="container h-100 d-flex flex-column justify-content-center">
            <div class="row justify-content-center align-items-center flex-grow-1">
                <div class="col-lg-10 col-md-12">
                    <h1 class="display-3 fw-bold mb-4" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.15);">
                        <i class="fas fa-globe-americas me-2"></i>
                        Climate Data Storytelling
                    </h1>
                    <p class="lead mb-5" style="font-size: 1.5rem;">
                        Descubra como o clima est√° mudando em Porto Alegre e no regi√£o sul do Brasil.<br>
                        Visualize dados meteorol√≥gicos, tend√™ncias e impactos de forma interativa e envolvente.
                    </p>


                    <a href="./artigo.html" class="btn btn-lg btn-outline-light px-5 py-3 mb-2">
                        <i class="fas fa-book-open me-2"></i> Ler o artigo completo
                    </a>
                    <a href="https://github.com/lucasfrag/climate-data-storytelling" target="_blank"
                        class="btn btn-lg btn-outline-light px-5 py-3 mb-2">
                        <i class="fab fa-github me-2"></i> Ver no GitHub
                    </a>


                    <div class="d-flex flex-column align-items-center mt-5">
                        <p class="mb-2" style="font-size: 1.15rem;">
                            <strong>Clique no bot√£o abaixo para come√ßar a explorar os dados.</strong>
                        </p>
                        <br><br>
                        <button id="explorarBtn"
                            class="btn btn-light rounded-circle shadow d-flex align-items-center justify-content-center animate-bounce"
                            style="width: 64px; height: 64px; font-size: 2rem; color: #1976d2;">
                            <i class="fas fa-arrow-down"></i>
                        </button>
                    </div>
                    <script>
                        document.getElementById('explorarBtn').addEventListener('click', function (e) {
                            e.preventDefault();
                            const target = document.querySelector('#porto-alegre');
                            if (target) {
                                target.scrollIntoView({ behavior: 'smooth' });
                            }
                        });                     
                    </script>
                </div>
            </div>
        </div>
    </section>

    <div class="tooltip" id="tooltip"></div>


    <!--------------------------------------------------------------------------------------------------------------------------->

    <!-- Se√ß√£o Porto Alegre -->
    <div class="container-fluid reveal-section" id="porto-alegre">
        <div class="row">

            <!-- Galeria de imagens -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">

                <div class="col-12 hv-100 d-flex flex-column justify-content-center align-items-center">
                    <h2 style="padding: 30px 0px 50px 0px; background-color: #f8f9fa;"></h2>
                    <div class="row">
                        <div class="col-lg-4 col-md-12 mb-4 mb-lg-0">
                            <img src="https://mdbcdn.b-cdn.net/img/Photos/Horizontal/Nature/4-col/img%20(73).webp"
                                class="w-100 shadow-1-strong rounded mb-4" alt="..." />

                            <img src="https://mdbcdn.b-cdn.net/img/Photos/Vertical/mountain1.webp"
                                class="w-100 shadow-1-strong rounded mb-4" alt="..." />
                        </div>

                        <div class="col-lg-4 mb-4 mb-lg-0">
                            <img src="https://mdbcdn.b-cdn.net/img/Photos/Vertical/mountain2.webp"
                                class="w-100 shadow-1-strong rounded mb-4" alt="..." />

                            <img src="https://mdbcdn.b-cdn.net/img/Photos/Horizontal/Nature/4-col/img%20(73).webp"
                                class="w-100 shadow-1-strong rounded mb-4" alt="..." />
                        </div>

                        <div class="col-lg-4 mb-4 mb-lg-0">
                            <img src="https://mdbcdn.b-cdn.net/img/Photos/Horizontal/Nature/4-col/img%20(18).webp"
                                class="w-100 shadow-1-strong rounded mb-4" alt="..." />

                            <img src="https://mdbcdn.b-cdn.net/img/Photos/Vertical/mountain3.webp"
                                class="w-100 shadow-1-strong rounded mb-4" alt="..." />
                        </div>
                    </div>
                </div>


            </div>


            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        Porto Alegre: A Capital Ga√∫cha
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p>Porto Alegre √© a capital do estado do Rio Grande do Sul, localizada no extremo sul do Brasil.
                            Com cerca de 1,5 milh√£o de habitantes, √© um importante centro pol√≠tico, econ√¥mico e cultural
                            da regi√£o.</p>

                        <p>Situada √†s margens do Lago Gua√≠ba e cercada por morros, a cidade possui uma geografia que a
                            torna suscet√≠vel a alagamentos. Essa rela√ß√£o hist√≥rica com a √°gua molda tanto sua paisagem
                            quanto seus desafios.</p>

                        <p>Al√©m disso, Porto Alegre abriga algumas das esta√ß√µes meteorol√≥gicas mais antigas e completas
                            do estado, o que a torna um ponto estrat√©gico para entender como as mudan√ßas clim√°ticas
                            afetam o Sul do Brasil.</p>

                        <p>Escolhemos essa cidade porque ela sintetiza uma realidade comum a muitas outras: um ambiente
                            urbano pressionado por eventos clim√°ticos cada vez mais extremos.</p>

                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button id="explorarEstacoes" class="btn btn-primary rounded-circle shadow"
                                style="width: 56px; height: 56px;" aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>

                            <script>
                                document.getElementById('explorarEstacoes').addEventListener('click', function (e) {
                                    e.preventDefault();
                                    const target = document.querySelector('#estacoes-meteorologicas');
                                    if (target) {
                                        target.scrollIntoView({ behavior: 'smooth' });
                                    }
                                });                                   
                            </script>
                        </div>

                    </div>
                </div>
            </div>


        </div>
    </div>


    <!---------------------------------------------------------------------------------------------------->





    <!-- Se√ß√£o Esta√ß√µes Meteorol√≥gicas -->
    <div class="container-fluid reveal-section" id="estacoes-meteorologicas">
        <div class="row">

            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light mb-3 text-h1 reveal-item sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        As Esta√ß√µes Meteorol√≥gicas
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p class="reveal-item">Antes de entendermos as mudan√ßas no clima, √© fundamental conhecer as
                            fontes dos dados. </p>

                        <p class="reveal-item">Desde o ano 2000, a esta√ß√£o A801 coleta dados consistentes. Com o tempo,
                            outras unidades, como a do Jardim Bot√¢nico e Bel√©m Novo, passaram a integrar essa rede,
                            permitindo an√°lises mais detalhadas e compara√ß√µes entre regi√µes da cidade.</p>

                        <section aria-labelledby="estacoes-title" class="reveal-item">

                            <form id="controls" class="d-flex flex-wrap align-items-center gap-3 mb-3"
                                aria-label="Filtros de esta√ß√µes" style="padding: 8px 0;">
                                <button id="playBtn" type="button" aria-label="Mostrar evolu√ß√£o das esta√ß√µes"
                                    title="Mostrar evolu√ß√£o das esta√ß√µes" class="btn btn-primary" aria-pressed="false"
                                    style="margin-left: 8px;">‚ñ∂Ô∏è Ver evolu√ß√£o das esta√ß√µes</button>
                                <button id="resetBtn" type="button" aria-label="Centralizar mapa"
                                    title="Centralizar mapa" class="btn btn-outline-secondary"
                                    style="margin-left: 8px;">üîÑ Centralizar mapa</button>
                            </form>

                            <p>

                                <strong>Arraste o ano para ver a evolu√ß√£o das esta√ß√µes!</strong>
                            </p>

                            <div id="yearSliderContainer" class="my-3">
                                <label for="yearSlider" id="yearSliderLabel" class="form-label"><strong>Ano:</strong>
                                    <span id="yearLabel">2020</span></label>
                                <input style="width: 100%;" type="range" id="yearSlider" min="2000" max="2025"
                                    value="2000" aria-labelledby="yearSliderLabel" />
                            </div>

                            <div class="mb-4 p-4 rounded shadow-sm bg-white border" id="charts"
                                aria-label="Gr√°fico de esta√ß√µes por ano">
                                <h3>Gr√°fico de Esta√ß√µes por Ano</h3>
                                <p class="mb-2 text-secondary">O gr√°fico abaixo mostra a evolu√ß√£o do n√∫mero de esta√ß√µes
                                    meteorol√≥gicas ao longo dos anos. Para visualizar as informa√ß√µes de um ano
                                    espec√≠fico, basta passar o mouse sobre as barras.</p>
                                <br>
                                <canvas id="graficoEstacoes" role="img"
                                    aria-label="Gr√°fico de barras mostrando o n√∫mero de esta√ß√µes fundadas por ano"></canvas>

                            </div>

                            <p class="reveal-item">

                            </p>

                        </section>


                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button id="explorarTransformacoes" class="btn btn-primary rounded-circle shadow"
                                style="width: 56px; height: 56px;" aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>

                            <script>
                                document.getElementById('explorarTransformacoes').addEventListener('click', function (e) {
                                    e.preventDefault();
                                    const target = document.querySelector('#transformacoes');
                                    if (target) {
                                        target.scrollIntoView({ behavior: 'smooth' });
                                    }
                                });                                   
                            </script>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">
                <div id="map" style="height: 900px;"></div>
            </div>
        </div>
    </div>



    <!------------------------------------------------------------------------------------------------------------------------------->

    <div class="container-fluid reveal-section" id="transformacoes">
        <div class="row">


            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        Transforma√ß√µes Clim√°ticas na Cidade
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">


                        <p>Ao longo dos √∫ltimos 25 anos, Porto Alegre passou por mudan√ßas clim√°ticas vis√≠veis nos dados.
                            As m√©dias mensais de temperatura indicam uma tend√™ncia de eleva√ß√£o, especialmente no ver√£o.
                            Os extremos ‚Äî dias excessivamente quentes ou frios ‚Äî tornaram-se mais frequentes.</p>

                        <p>Comparando os primeiros anos da s√©rie com os mais recentes, notamos mudan√ßas que, embora
                            sutis no curto prazo, revelam uma transforma√ß√£o progressiva.</p>


                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 56px; height: 56px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>


                    </div>
                </div>
            </div>

            <!-- Gr√°fico -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center grafico-container"
                style="background-color: #f8f9fa;">


                <section id="transformacoes-climaticas" class="container my-5">
                    <canvas id="grafico-transformacoes" height="150"></canvas>
                </section>

                <!-- Chart.js via CDN -->
                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

                <script>
                    fetch('./data/resumo_visualizacoes.json')
                        .then(res => res.json())
                        .then(dados => {
                            const anos = [];
                            const tempMedia = [];
                            const tempMax = [];
                            const tempMin = [];
                            const diasMax = {};
                            const diasMin = {};

                            // Fun√ß√£o para formatar datas para DD/MM/AAAA
                            function formatarData(dataISO) {
                                const data = new Date(dataISO);
                                return isNaN(data) ? "Data inv√°lida" : data.toLocaleDateString("pt-BR");
                            }

                            for (const ano in dados) {
                                const estacoes = Object.keys(dados[ano]);
                                const poaKey = estacoes.find(e => e.includes("PORTO_ALEGRE"));
                                if (poaKey && dados[ano][poaKey].temperatura) {
                                    anos.push(ano);
                                    tempMedia.push(dados[ano][poaKey].temperatura.media);
                                    tempMax.push(dados[ano][poaKey].temperatura.max);
                                    tempMin.push(dados[ano][poaKey].temperatura.min);

                                    if (dados[ano][poaKey].extremos) {
                                        diasMax[ano] = formatarData(dados[ano][poaKey].extremos.dia_temp_max);
                                        diasMin[ano] = formatarData(dados[ano][poaKey].extremos.dia_temp_min);
                                    }
                                }
                            }

                            const ctx = document.getElementById("grafico-transformacoes").getContext("2d");
                            new Chart(ctx, {
                                type: "line",
                                data: {
                                    labels: anos,
                                    datasets: [
                                        {
                                            label: "Temperatura M√©dia (¬∞C)",
                                            data: tempMedia,
                                            borderColor: "#007bff",
                                            backgroundColor: "rgba(0,123,255,0.1)",
                                            tension: 0.4,
                                            fill: false,
                                            pointRadius: 3
                                        },
                                        {
                                            label: "Temperatura M√°xima (¬∞C)",
                                            data: tempMax,
                                            borderColor: "#e74c3c",
                                            backgroundColor: "rgba(231,76,60,0.1)",
                                            tension: 0.4,
                                            fill: false,
                                            pointRadius: 3
                                        },
                                        {
                                            label: "Temperatura M√≠nima (¬∞C)",
                                            data: tempMin,
                                            borderColor: "#2ecc71",
                                            backgroundColor: "rgba(46,204,113,0.1)",
                                            tension: 0.4,
                                            fill: false,
                                            pointRadius: 3
                                        }
                                    ]
                                },
                                options: {
                                    responsive: true,
                                    interaction: {
                                        mode: "nearest",
                                        intersect: false
                                    },
                                    plugins: {
                                        tooltip: {
                                            callbacks: {
                                                label: ctx => {
                                                    const tipo = ctx.dataset.label;
                                                    const valor = ctx.formattedValue;
                                                    const ano = ctx.label;

                                                    const linhas = [`${tipo}: ${valor} ¬∞C`];

                                                    if (tipo.includes("M√°xima") && diasMax[ano]) {
                                                        linhas.push(`Registrado em: ${diasMax[ano]}`);
                                                    }

                                                    if (tipo.includes("M√≠nima") && diasMin[ano]) {
                                                        linhas.push(`Registrado em: ${diasMin[ano]}`);
                                                    }

                                                    return linhas;
                                                }
                                            }
                                        },
                                        legend: {
                                            display: true,
                                            position: "top",
                                            labels: {
                                                usePointStyle: true
                                            }
                                        }
                                    },
                                    scales: {
                                        y: {
                                            title: { display: true, text: "Temperatura (¬∞C)" },
                                            beginAtZero: false
                                        },
                                        x: {
                                            title: { display: true, text: "Ano" }
                                        }
                                    }
                                }
                            });
                        });
                </script>


            </div>

        </div>
    </div>



    <!------------------------------------------------------------------------------------------------------------------------------->

    <div class="container-fluid reveal-section" id="transformacoes">
        <div class="row">
            <!-- Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">
                <div id="map" style="height: 900px;"></div>
            </div>

            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        O Evento de Maio de 2024
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">


                        <p>Maio de 2024 foi o ponto de ruptura. A √°gua n√£o teve por onde escoar, o solo estava saturado,
                            e a chuva n√£o cessava. Em poucos dias, bairros inteiros ficaram debaixo d‚Äô√°gua.</p>

                        <p>Mas por que essa enchente foi t√£o severa? Foi apenas uma chuva intensa ou havia algo maior em
                            curso?</p>

                        <p>Para compreender, √© necess√°rio revisar os padr√µes de chuva e os meses que antecederam o
                            evento.</p>


                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 56px; height: 56px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>




                    </div>
                </div>
            </div>


        </div>
    </div>

    <!---------------------------------------------------------------------------------------------------->


    <div class="container-fluid reveal-section" id="transformacoes">
        <div class="row">
            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        Abril: O M√™s das Chuvas
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">

                        <p>Abril √©, historicamente, um m√™s chuvoso em Porto Alegre - os dados desde 2000 confirmam essa
                            tend√™ncia.</p>

                        <p>No entanto, em 2024, a quantidade e a persist√™ncia das chuvas ultrapassaram a m√©dia
                            hist√≥rica, contribuindo para o agravamento da situa√ß√£o.</p>


                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 56px; height: 56px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>




                    </div>
                </div>
            </div>

            <!-- Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">
                <div id="map" style="height: 900px;"></div>
            </div>

        </div>
    </div>

    <!---------------------------------------------------------------------------------------------------->

    <!---------------------------------------------------------------------------------------------------->


    <div class="container-fluid reveal-section" id="transformacoes">
        <div class="row">
            <!-- Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">
                <div id="map" style="height: 900px;"></div>
            </div>

            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        O El Ni√±o Chegou
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p>O El Ni√±o √© um fen√¥meno clim√°tico caracterizado pelo aquecimento an√¥malo das √°guas do
                            Pac√≠fico, influenciando o
                            clima global.</p>

                        <p>No Sul do Brasil, ele costuma trazer mais calor e umidade, o que aumenta a frequ√™ncia e
                            intensidade das chuvas.</p>

                        <p>Em 2024, os dados mostraram aumento nas temperaturas, umidade elevada e volumes de
                            precipita√ß√£o acima do esperado.</p>

                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 56px; height: 56px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>




                    </div>
                </div>
            </div>



        </div>
    </div>


    <!---------------------------------------------------------------------------------------------------->


    <div class="container-fluid reveal-section" id="transformacoes">
        <div class="row">
            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        La Ni√±a: O Contraponto
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p>La Ni√±a, por outro lado, provoca o resfriamento das √°guas do Pac√≠fico. Isso geralmente
                            resulta em um clima mais seco e frio na regi√£o Sul.</p>

                        <p>Durante seus ciclos, observamos redu√ß√£o da umidade, temperaturas mais baixas e menor
                            incid√™ncia de chuvas.</p>

                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 56px; height: 56px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>




                    </div>
                </div>
            </div>

            <!-- Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">
                <div id="map" style="height: 900px;"></div>
            </div>


        </div>
    </div>


    <!---------------------------------------------------------------------------------------------------->


    <div class="container-fluid reveal-section" id="transformacoes">
        <div class="row">
            <!-- Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">
                <div id="map" style="height: 900px;"></div>
            </div>


            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        A Gangorra do Clima
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p>El Ni√±o e La Ni√±a alternam-se em ciclos de tr√™s a cinco anos, afetando diretamente o clima
                            regional.</p>

                        <p>Nos √∫ltimos anos, esses ciclos parecem estar se tornando mais curtos e intensos,
                            possivelmente em fun√ß√£o do aquecimento global.</p>

                        <p>Isso aumenta os riscos de desastres como enchentes, estiagens e colapsos urbanos.</p>


                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 56px; height: 56px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>




                    </div>
                </div>
            </div>


        </div>
    </div>

    <!---------------------------------------------------------------------------------------------------->


    <div class="container-fluid reveal-section" id="transformacoes">
        <div class="row">

            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        Radia√ß√£o Solar e Calor Urbano
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p>Os dados de radia√ß√£o solar mostram aumento ao longo dos anos. C√©us mais limpos significam
                            dias mais quentes, intensificando o calor nas cidades.</p>

                        <p>Esse fen√¥meno, combinado com o El Ni√±o, contribui para um ciclo de calor e umidade que
                            favorece eventos extremos.</p>


                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 56px; height: 56px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>
                    </div>

                </div>
            </div>
            <!-- Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">
                <div id="map" style="height: 900px;"></div>
            </div>

        </div>
    </div>

    <!---------------------------------------------------------------------------------------------------->


    <div class="container-fluid reveal-section" id="transformacoes">
        <div class="row">

            <!-- Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">
                <div id="map" style="height: 900px;"></div>
            </div>



            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        Press√£o Atmosf√©rica: Um Sinal Antecipado
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p>Quedas na press√£o atmosf√©rica indicam aproxima√ß√£o de frentes frias. Nos dias que antecederam
                            a enchente de 2024, as esta√ß√µes registraram quedas sucessivas, evidenciando a gravidade da
                            situa√ß√£o.</p>


                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 56px; height: 56px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>



                    </div>
                </div>
            </div>


        </div>
    </div>


    <!---------------------------------------------------------------------------------------------------->


    <div class="container-fluid reveal-section" id="transformacoes">
        <div class="row">


            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        Ventos e Umidade
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p>A dire√ß√£o e velocidade dos ventos tamb√©m influenciam a reten√ß√£o de umidade na atmosfera. Em
                            2024, ventos predominantes impediram a dispers√£o das nuvens sobre Porto Alegre.</p>


                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 56px; height: 56px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>



                    </div>
                </div>
            </div>

            <!-- Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">
                <div id="map" style="height: 900px;"></div>
            </div>

        </div>
    </div>


    <!---------------------------------------------------------------------------------------------------->


    <div class="container-fluid reveal-section" id="transformacoes">
        <div class="row">
            <!-- Mapa -->
            <div class="col-sm-12 col-md-12 col-lg-6 justify-content-center align-items-center"
                style="background-color: #f8f9fa;">
                <div id="map" style="height: 900px;"></div>
            </div>

            <!-- Storytelling -->
            <div class="col-sm-12 col-md-12 col-lg-6 hide-scrollbar"
                style="background-color: #f8f9fa; overflow-y: scroll; height: 900px;">
                <div class="col-12 d-flex flex-column">
                    <h1 class="bg-light h1 mb-3 sticky-top" id="estacoes-title"
                        style="padding: 50px 0px 30px 0px; background-color: #f8f9fa;" tabindex="0">
                        O Ponto de Orvalho
                    </h1>

                    <div class="col-12 justify-content-center align-items-center">
                        <p>O ponto de orvalho indica a satura√ß√£o do ar. Em per√≠odos de El Ni√±o, os valores tendem a ser
                            mais altos, favorecendo chuvas intensas e sensa√ß√£o t√©rmica elevada.</p>

                        <div class="end-content w-100 text-center mt-4">
                            <p class="mb-2 text-muted">Clique no bot√£o abaixo para seguir para a pr√≥xima se√ß√£o.</p>
                            <button class="btn btn-primary rounded-circle shadow" style="width: 56px; height: 56px;"
                                aria-label="Ir para a pr√≥xima se√ß√£o">
                                <span style="font-size: 1.7em; vertical-align: middle;"
                                    aria-hidden="true">&#8595;</span>
                            </button>
                        </div>



                    </div>
                </div>
            </div>


        </div>
    </div>





















    <!-- Rodap√© -->
    <footer class="bg-light text-center text-lg-start">
        <div class="text-center p-4" style="background-color: #f8f9fa;">
            2025 ¬© Todos os direitos reservados.
        </div>


        <script>
            // Revela os elementos da se√ß√£o aos poucos
            document.addEventListener("DOMContentLoaded", function () {
                function revealSequentially(items, delay = 350) {
                    items.forEach((item, idx) => {
                        setTimeout(() => {
                            item.classList.add('visible');
                        }, idx * delay);
                    });
                }

                const section = document.getElementById('estacoes-meteorologicas');
                const revealItems = section.querySelectorAll('.reveal-item');
                let revealed = false;

                function handleReveal(entries, observer) {
                    entries.forEach(entry => {
                        if (entry.isIntersecting && !revealed) {
                            revealSequentially(Array.from(revealItems));
                            revealed = true;
                            observer.disconnect();
                        }
                    });
                }

                const observer = new IntersectionObserver(handleReveal, { threshold: 0.2 });
                observer.observe(section);
            });
        </script>

        <!-- Mapa e gr√°fico de esta√ß√µes -->
        <script>
            const map = L.map('map').setView([-30.5, -53], 6.5);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors'
            }).addTo(map);

            let marcadores = [];
            let estacoes = [];
            let intervalo = null;
            let chart;

            async function carregarEstacoes() {
                const resp = await fetch('./data/estacoes.json');
                estacoes = await resp.json();
                atualizarMapa(parseInt(document.getElementById('yearSlider').value));
                desenharGrafico();
            }

            function normalizarData(data) {
                if (data.includes('/')) {
                    const [dia, mes, ano] = data.split('/');
                    return `${ano.length === 2 ? '20' + ano : ano}-${mes.padStart(2, '0')}-${dia.padStart(2, '0')}`;
                }
                return data;
            }

            function formatarDataParaBR(dataISO) {
                const [ano, mes, dia] = dataISO.split('-');
                return `${dia}/${mes}/${ano}`;
            }

            function atualizarMapa(ano) {
                marcadores.forEach(m => map.removeLayer(m));
                marcadores = [];

                estacoes
                    .map(est => ({ ...est, data_fundacao: normalizarData(est.data_fundacao) }))
                    .filter(est => parseInt(est.data_fundacao.substring(0, 4)) <= ano)
                    .forEach(est => {
                        const dataBR = formatarDataParaBR(est.data_fundacao);
                        const marker = L.marker([est.latitude, est.longitude])
                            .bindPopup(`
                                <div style="min-width:200px;">
                                    <h5 style="margin-bottom: 0.5em; color: #1976d2;">
                                        <i class="fas fa-map-marker-alt me-2"></i> ${est.estacao}
                                    </h5>
                                    <p style="margin-bottom: 0.3em;">
                                        <span class="badge bg-primary text-white" style="font-size:0.9em;"> ${est.uf}</span>
                                    </p>
                                    <p style="margin-bottom: 0.3em;">
                                        <i class="fas fa-calendar-alt me-1"></i><strong> Coletando dados de:</strong> ${dataBR}
                                    </p>
                                    ${est.municipio ? `<p style="margin-bottom: 0.3em;"><i class="fas fa-city me-1"></i><strong> Munic√≠pio:</strong> ${est.municipio}</p>` : ''}
                                    ${est.altitude ? `<p style="margin-bottom: 0.3em;"><i class="fas fa-mountain me-1"></i><strong> Altitude:</strong> ${est.altitude} m</p>` : ''}
                                    ${est.tipo ? `<p style="margin-bottom: 0.3em;"><i class="fas fa-info-circle me-1"></i><strong> Tipo:</strong> ${est.tipo}</p>` : ''}
                                </div>
                            `)
                            .addTo(map);
                        marcadores.push(marker);
                    });
            }

            function desenharGrafico() {
                const anos = {};
                estacoes.forEach(est => {
                    const ano = parseInt(normalizarData(est.data_fundacao).substring(0, 4));
                    anos[ano] = (anos[ano] || 0) + 1;
                });
                const labels = Object.keys(anos).sort((a, b) => a - b);
                const dados = labels.map(ano => anos[ano]);

                const ctx = document.getElementById('graficoEstacoes').getContext('2d');
                chart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels,
                        datasets: [{
                            label: 'Esta√ß√µes por Ano de Funda√ß√£o',
                            data: dados,
                            backgroundColor: 'rgba(54, 162, 235, 0.6)'
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: false },
                            tooltip: { mode: 'index', intersect: false }
                        },
                        scales: {
                            x: { title: { display: true, text: 'Ano' } },
                            y: { title: { display: true, text: 'N√∫mero de Esta√ß√µes' }, beginAtZero: true }
                        }
                    }
                });
                if (marcadores.length > 0) {
                    const popupContent = marcadores[0].getPopup().getContent();
                    const instrucoes = `<hr><p><strong>üìç Clique nas esta√ß√µes para ver mais detalhes.</strong></p>`;
                    marcadores[0].getPopup().setContent(popupContent + instrucoes);
                    marcadores[0].openPopup();
                }
            }

            const slider = document.getElementById('yearSlider');
            const label = document.getElementById('yearLabel');
            const btn = document.getElementById('playBtn');
            const resetBtn = document.getElementById('resetBtn');

            slider.addEventListener('input', () => {
                const ano = parseInt(slider.value);
                label.textContent = ano;
                atualizarMapa(ano);
            });

            resetBtn.addEventListener('click', () => {
                map.setView([-30.5, -53], 6.5)
            });

            btn.addEventListener('click', () => {
                if (intervalo) {
                    clearInterval(intervalo);
                    intervalo = null;
                    btn.textContent = '‚ñ∂Ô∏è Ver evolu√ß√£o das esta√ß√µes';
                } else {
                    if (parseInt(slider.value) >= 2025) {
                        slider.value = 2000;
                        label.textContent = 2000;
                        atualizarMapa(2000);
                    }
                    intervalo = setInterval(() => {
                        let ano = parseInt(slider.value);
                        if (ano < 2025) {
                            ano++;
                            slider.value = ano;
                            label.textContent = ano;
                            atualizarMapa(ano);
                        } else {
                            clearInterval(intervalo);
                            intervalo = null;
                            btn.textContent = '‚ñ∂Ô∏è Reproduzir novamente';
                            setTimeout(() => {
                                btn.textContent = '‚ñ∂Ô∏è Ver evolu√ß√£o das esta√ß√µes';
                            }, 2000);
                        }
                    }, 150);
                    btn.textContent = '‚è∏Ô∏è Pausar';
                }
            });

            carregarEstacoes();
        </script>



        <script src="./assets/js/script.js"></script>
        <script src="./assets/js/d3-charts.js"></script>
        <script src="./assets/js/jquery-3.5.1.slim.min.js"></script>
        <script src="./assets/js/popper.min.js"></script>
        <script src="./assets/js/bootstrap.min.js"></script>
        <script src="./assets/js/papaparse.min.js"></script>
</body>

</html>

</body>